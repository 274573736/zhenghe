<?php
 goto pRsO9; ZZasj: function update_eleme_order($order_id, $status, $rider_id = 0) { goto TrPXK; Ymei8: KXFwZ: goto T6Z7F; GQ5iH: hLNJ8: goto Z33FE; dhHHb: if (!($result !== true)) { goto oCS47; } goto Yw0iq; I8HtA: if (!empty($order["\x62\165\x73\x69\156\145\163\x73\x5f\x69\144"])) { goto KXFwZ; } goto P4zLz; FiRu3: !$rider_id && ($rider_id = $GLOBALS["\103\x55\x52\122\105\116\124\137\x52\x49\x44\105\x52"]); goto rhct7; MJMZM: $business = pdo_get("\x6d\141\153\145\137\x73\x70\145\145\144\x5f\142\x75\163\x69\156\x65\163\x73", array("\151\x64" => $order["\x62\165\163\x69\x6e\x65\x73\163\x5f\151\x64"]), array("\x73\x68\157\160\x5f\x69\x64", "\x74\x6f\153\x65\x6e")); goto Wzm1o; zBEDK: $order = pdo_get("\155\x61\x6b\145\137\x73\x70\x65\x65\x64\x5f\157\162\144\x65\162", array("\151\x64" => $order_id), array("\142\165\x73\151\x6e\145\x73\x73\x5f\x69\x64", "\157\x72\x64\145\162\x5f\143\157\x64\145")); goto I8HtA; zI2qk: return false; goto GQ5iH; v61vR: return true; goto Z6AyP; Yw0iq: return false; goto tqVlo; Wzm1o: if (!(empty($business["\x73\x68\x6f\160\x5f\x69\144"]) || empty($business["\x74\x6f\153\145\x6e"]))) { goto hLNJ8; } goto zI2qk; p9Nu7: $riderMobile = pdo_get("\155\x61\x6b\145\x5f\x73\x70\x65\145\x64\x5f\x72\151\144\145\162", ["\151\144" => $rider_id], ["\155\x6f\x62\151\154\x65"]); goto F5ybx; F5ybx: $param = array("\163\x68\x6f\x70\111\x64" => $business["\x73\x68\157\160\x5f\x69\144"], "\163\164\x61\164\x65\111\x6e\146\157" => array("\x6f\162\144\145\162\111\144" => $order_code, "\x64\x69\x73\164\x72\151\142\165\164\157\x72\111\x64" => 201, "\x6b\156\x69\147\150\x74" => array("\151\x64" => "\62\x39", "\160\150\x6f\x6e\x65" => $riderMobile["\x6d\x6f\x62\x69\154\145"], "\x6e\x61\155\145" => "\xe5\225\x86\345\xae\266\350\x87\252\xe9\205\215\xe9\x80\x81"), "\163\164\x61\x74\x65" => $status)); goto DGEPi; T6Z7F: $order_code = str_replace("\x42", '', $order["\x6f\x72\144\x65\x72\x5f\143\x6f\x64\145"]); goto MJMZM; P4zLz: return false; goto Ymei8; TrPXK: global $_W; goto FiRu3; DGEPi: $result = $ele->call("\145\x6c\145\155\x65\56\x6f\x72\144\145\162\x2e\163\x65\154\146\104\x65\x6c\x69\x76\x65\x72\171\123\164\x61\x74\x65\123\171\156\143", $param); goto dhHHb; rhct7: require_once dirname(__FILE__) . "\x2f\x6c\151\x62\x2f\145\154\x65\57\x45\x6c\x65\x6d\145\56\143\154\x61\163\x73\56\x70\150\160"; goto zBEDK; Z33FE: $ele = new Eleme($order["\142\165\x73\x69\156\145\163\x73\137\x69\x64"]); goto p9Nu7; tqVlo: oCS47: goto v61vR; Z6AyP: } goto sBMbg; pWMFi: function base64EncodeImage($image_file) { goto uaH0C; yWcCS: $base64_image = "\x64\141\x74\x61\x3a" . $image_info["\155\x69\155\145"] . "\73\x62\141\163\x65\x36\64\x2c" . chunk_split(base64_encode($image_data)); goto VysTL; e1S0Q: $image_info = getimagesize($image_file); goto jbdic; VysTL: return $base64_image; goto jK_v2; jbdic: $image_data = fread(fopen($image_file, "\x72"), filesize($image_file)); goto yWcCS; uaH0C: $base64_image = ''; goto e1S0Q; jK_v2: } goto JYYJ7; MNapK: function rider_invite_user($user_id, $rider_id = 0, $type = "\165\x73\x65\x72\157\156\x65") { goto mzGc2; v7WoZ: if (!empty($add)) { goto B0QnW; } goto KUujm; sH1hX: $invite = !empty($invite["\x76\x61\154\165\x65"]) ? unserialize($invite["\x76\x61\154\x75\x65"]) : array(); goto TOG88; mzGc2: if (!empty($rider_id)) { goto NtD5W; } goto YH2X7; YH2X7: $rider = pdo_get("\155\x61\153\145\137\x73\160\x65\x65\144\x5f\165\163\145\162", array("\151\144" => $user_id), array("\x72\145\x63\x6f\155\155\145\x6e\144\137\162\x69\144\x65\162")); goto OAGNf; Pm8dl: $rider_id = intval($rider["\x72\145\x63\157\x6d\x6d\145\x6e\x64\x5f\x72\151\144\x65\x72"]); goto RksvE; P49vn: $invite = pdo_get("\155\141\x6b\145\x5f\163\160\x65\145\144\x5f\x73\145\164\x74\x69\156\x67", array("\153\145\x79" => "\x75\163\145\162\137\151\x6e\166\x69\x74\x65", "\165\x6e\151\x61\143\x69\x64" => $GLOBALS["\165\156\151\141\143\151\144"]), array("\x76\141\x6c\165\x65")); goto sH1hX; iFRuH: i2TJB: goto ECOEm; u9rC_: return false; goto tevD5; byd4v: if (empty($brokerage)) { goto aPVVq; } goto o8h2i; Q2_wW: pdo_insert("\x6d\141\x6b\145\x5f\163\x70\145\145\144\x5f\162\151\144\x65\162\x5f\x63\x61\x73\150\x6c\x6f\x67", $logData); goto CqoSp; tevD5: Cnxr_: goto Pm8dl; TlM2s: if (!($invite[$type . "\x5f\154\x69\155\151\x74"] <= $brokerage["\x63\157\x75\x6e\164"])) { goto oCeR_; } goto tUHTw; CqoSp: return true; goto cl2_g; DalCB: $brokerage = pdo_get("\155\141\x6b\145\x5f\163\160\x65\145\x64\137\162\x69\144\145\x72\137\x62\162\157\153\145\x72\141\x67\x65", $where, array("\x43\117\x55\x4e\x54\50\52\x29\x20\x61\x73\40\x63\157\x75\x6e\164")); goto TlM2s; BjMej: z4hv3: goto bklvA; sfux1: oCeR_: goto tyvTG; TOG88: if (!(empty($invite) || empty($user_id) || empty($invite[$type . "\137\154\x69\x6d\151\164"]))) { goto i2TJB; } goto Ej0hZ; fOP9z: aPVVq: goto BjMej; ECOEm: $where = array("\164\171\x70\x65" => "\165\163\x65\x72\x5f" . $type, "\x72\145\x63\157\155\x6d\x65\156\144\x5f\x69\x64" => $rider_id, "\x75\156\151\141\x63\x69\144" => $GLOBALS["\x75\156\151\141\143\151\144"]); goto DalCB; o8h2i: return false; goto fOP9z; Ej0hZ: return false; goto iFRuH; JHHyi: $add = pdo_insert("\x6d\x61\153\x65\x5f\x73\x70\x65\145\144\x5f\x72\x69\x64\x65\x72\x5f\x62\162\157\153\145\162\141\x67\x65", $data); goto v7WoZ; n1NVm: $logData = array("\164\x79\160\145" => 3, "\x74\151\164\x6c\145" => $type == "\165\x73\x65\x72\x6f\156\145" ? "\351\x82\200\350\257\267\347\224\250\xe6\210\267\xe9\xa6\226\345\x8d\x95\345\245\x96\345\212\261" : "\xe6\x8e\xa8\350\x8d\x90\xe7\x94\xa8\346\210\xb7\xe5\xa5\x96\xe5\212\261", "\162\x69\144\x65\x72\137\x69\x64" => $rider_id, "\x61\155\x6f\x75\156\164" => $data["\x61\x6d\x6f\x75\x6e\164"], "\x73\x74\141\x74\x75\x73" => 2, "\141\x64\144\x5f\x74\151\x6d\145" => time(), "\x75\x6e\x69\x61\x63\x69\144" => $GLOBALS["\x75\x6e\151\141\143\151\x64"]); goto Q2_wW; RksvE: NtD5W: goto P49vn; tUHTw: return false; goto sfux1; tyvTG: if (!($type == "\165\x73\145\162\x6f\156\145")) { goto z4hv3; } goto Gw_wq; XNSSI: $brokerage = pdo_get("\155\x61\x6b\145\137\163\x70\x65\145\144\137\x72\151\144\x65\162\x5f\x62\x72\157\x6b\145\x72\x61\147\x65", $where, array("\x69\144")); goto byd4v; bklvA: $data = array("\x61\143\x63\157\165\x6e\164" => 0, "\x75\163\145\162\137\151\144" => $user_id, "\x72\x65\x63\157\155\155\x65\156\x64\x5f\x69\x64" => $rider_id, "\x74\171\160\x65" => "\x75\x73\x65\162\x5f" . $type, "\x61\x6d\157\165\x6e\x74" => sprintf("\x25\x2e\x32\146", $invite[$type]), "\163\x74\x61\x74\165\163" => 2, "\141\144\x64\137\164\x69\x6d\145" => time(), "\165\156\151\x61\143\x69\x64" => $GLOBALS["\x75\x6e\151\141\x63\151\x64"]); goto JHHyi; Gw_wq: $where = array_merge($where, ["\165\163\x65\162\137\151\144" => $user_id]); goto XNSSI; OAGNf: if (!empty($rider["\x72\x65\143\157\155\x6d\x65\156\144\x5f\x72\151\x64\145\162"])) { goto Cnxr_; } goto u9rC_; KUujm: return false; goto HNNqd; HNNqd: B0QnW: goto n1NVm; cl2_g: } goto G1VqY; OmJ1I: function toint($value) { goto U2t2U; Zdlry: iitS3: goto nKhwu; kuGnj: if (!(ceil($value) > intval($value))) { goto iitS3; } goto u2cry; nKhwu: return intval($value); goto zGD2W; U2t2U: is_numeric($value) || ($value = intval($value)); goto kuGnj; u2cry: return sprintf("\x25\x2e\x32\x66", $value); goto Zdlry; zGD2W: } goto vn0MK; UNvuf: function riderCashLog($rider_id, $order_code, $amount, $title = '', $type = 1, $status = 0, $object_id = 0) { goto ZoCSX; vv23e: $add = pdo_insert("\x6d\141\x6b\x65\x5f\x73\160\x65\x65\144\x5f\x72\151\144\145\x72\137\143\141\163\150\x6c\x6f\x67", $data); goto pXGKH; pXGKH: return $add; goto FmO1g; ZoCSX: $data = array("\x74\151\x74\154\x65" => !empty($title) ? $title : '', "\162\x69\144\x65\162\137\x69\x64" => intval($rider_id), "\157\142\x6a\145\143\164\x5f\151\x64" => $object_id, "\x6f\x72\x64\145\162\x5f\x63\x6f\144\145" => $order_code, "\x61\x6d\157\x75\x6e\x74" => sprintf("\x25\56\x32\146", $amount), "\x74\x79\x70\145" => intval($type), "\x73\164\141\x74\165\163" => $status, "\x61\144\144\x5f\x74\x69\x6d\x65" => time(), "\x75\x6e\x69\x61\143\x69\x64" => !empty($GLOBALS["\x75\x6e\151\141\x63\151\x64"]) ? $GLOBALS["\x75\156\151\x61\143\x69\x64"] : 0); goto Jbclx; Jbclx: $data["\164\151\164\x6c\145"] == '' && ($data["\164\x69\164\154\145"] = $type == 0 ? "\xe6\x94\xaf\345\207\xba" : "\xe6\x94\266\345\x85\xa5"); goto vv23e; FmO1g: } goto eOcfI; ZHlV1: function is_driver_rider($rider_id = 0) { goto j356I; wWslt: if (empty($rider)) { goto ywBHg; } goto bU14H; j356I: $rider = pdo_get("\155\141\153\145\x5f\163\x70\145\145\144\x5f\162\x69\x64\145\x72\137\x64\x72\x69\x76\145\162", array("\x72\x69\x64\x65\x72\137\x69\x64" => $rider_id, "\x73\164\141\x74\x75\x73" => 2), array("\151\144")); goto wWslt; EoALj: ywBHg: goto sJLdD; bU14H: return true; goto EoALj; sJLdD: return false; goto I2X9n; I2X9n: } goto EbX_N; ngjTd: function get_mapapi_time($begin, $end) { goto y5gNm; fnEXl: TTGAL: goto oF7tU; oF7tU: return isset($map["\x64\x61\x74\141"]["\160\141\164\x68\163"][0]["\144\165\x72\x61\x74\x69\157\x6e"]) ? $map["\x64\141\x74\141"]["\160\x61\164\x68\x73"][0]["\144\165\162\141\164\151\x6f\x6e"] : ''; goto xotLM; gpch_: $map = setRequest($url); goto Sp0zK; IiZ6v: empty($mapkey["\x76\141\x6c\165\x65"]) && ($mapkey["\166\141\x6c\165\x65"] = ''); goto vMRGW; CtJXX: logging_run(date("\131\55\x6d\x2d\x64\40\x48\72\151") . "\x5b\101\x63\x63\145\x70\164\x4f\x72\x64\x65\162\40\x55\160\144\x61\164\x65\x20\145\x78\160\x65\143\x74\x5f\x74\151\155\x65\135\x20\x45\162\x72\x6f\x72\x3a\x20" . $url . "\55\55\x2d" . @json_encode($map, JSON_UNESCAPED_UNICODE), "\164\162\141\143\145", "\155\x61\153\145\x73\160\145\x65\144\x6c\x6f\x67"); goto fnEXl; vMRGW: $udata = array("\153\145\171" => $mapkey["\166\x61\154\x75\145"], "\163" => "\162\163\x78", "\160\x6c\x61\164\146\x6f\162\155" => "\127\x58\x4a\x53", "\x61\x70\x70\x6e\x61\x6d\145" => $mapkey["\166\141\x6c\165\x65"], "\163\144\153\x76\x65\x72\x73\151\157\x6e" => "\x31\56\x32\56\60", "\154\157\147\x76\x65\162\163\x69\x6f\x6e" => "\x32\x2e\x30", "\x6f\x72\151\147\151\156" => $begin, "\x64\x65\163\x74\151\156\x61\x74\x69\x6f\156" => $end); goto aRQgK; a1e3N: load()->func("\x6c\157\147\147\x69\x6e\x67"); goto CtJXX; aRQgK: $url = "\150\164\x74\x70\x73\x3a\57\57\x72\145\x73\164\x61\x70\x69\x2e\x61\x6d\141\x70\x2e\x63\157\155\x2f\x76\64\x2f\x64\151\x72\x65\x63\164\151\x6f\156\x2f\x62\151\x63\x79\143\x6c\x69\156\147\x3f" . http_build_query($udata); goto gpch_; A7Q21: if (!(intval($map["\145\x72\162\143\157\144\x65"]) !== 0 || strtoupper($map["\145\x72\162\x6d\x73\x67"]) !== "\x4f\x4b")) { goto TTGAL; } goto a1e3N; y5gNm: $mapkey = pdo_get("\x6d\x61\153\145\x5f\x73\x70\x65\x65\x64\137\x73\x65\x74\164\151\156\x67", array("\x75\x6e\x69\x61\x63\151\x64" => $GLOBALS["\165\156\151\x61\143\x69\144"], "\153\145\x79" => "\162\151\x64\145\162\137\x67\x61\157\144\145\x5f\153\145\171"), array("\x76\141\x6c\x75\145")); goto IiZ6v; Sp0zK: $map = json_decode($map, true); goto A7Q21; xotLM: } goto ZZasj; pNqHt: function getXMLData($xml) { goto yuyfV; PVn03: avsx8: goto M5gIR; rN5E4: $results = array(); goto X28YH; X28YH: foreach ($data as $k => $v) { $results[$k] = (string) $v; ZuPwm: } goto PVn03; M5gIR: return $results; goto cW1Fv; HJrd2: rUKpb: goto rN5E4; Tw9Xv: $data = simplexml_load_string($xml); goto XrZkS; yuyfV: if (!function_exists("\x73\151\155\x70\x6c\145\x78\155\154\137\x6c\x6f\141\x64\137\163\164\x72\151\156\x67")) { return array(); } goto Tw9Xv; XrZkS: if (!($data === false)) { goto rUKpb; } goto kGqst; kGqst: return array(); goto HJrd2; cW1Fv: } goto uBlzX; pua38: function updateRiderMoney($rider_id, $amount, $type = 0) { goto SlLIF; kEGXf: $bond = !empty($bondMoney["\166\x61\154\165\x65"]) ? intval($bondMoney["\166\141\154\165\145"]) : 200; goto BLguo; SsVG1: $valid = $bond - $rider["\142\x6f\x6e\144\137\x6d\x6f\156\145\x79"] - $amount; goto AyB37; p9Fn3: goto lKnbi; goto KNIVM; SpHEi: goto d3l9S; goto MiT0j; BLguo: $result = 0; goto tHuAg; SlLIF: $bondMoney = pdo_get("\155\x61\x6b\145\137\x73\x70\x65\x65\144\x5f\x73\x65\164\x74\151\156\x67", array("\153\x65\171" => "\x72\151\144\x65\x72\x5f\142\x6f\x6e\144\x6d\x6f\156\145\171", "\x75\156\151\x61\x63\x69\x64" => $GLOBALS["\x75\156\x69\141\143\x69\x64"]), array("\x76\x61\x6c\x75\145")); goto yJvIM; MiT0j: fKkaD: goto aDuAi; tHuAg: if ($rider["\x62\x6f\x6e\x64\x5f\x6d\x6f\x6e\x65\171"] < $bond) { goto H0wID; } goto kTJNy; AyB37: if ($valid < 0) { goto fKkaD; } goto WR6Ge; rs1i5: return true; goto b6H38; kTJNy: $result = pdo_update("\x6d\x61\153\x65\x5f\x73\160\x65\145\x64\x5f\x72\x69\144\x65\x72", array("\166\x61\154\151\x64\x5f\155\157\156\145\x79\x20\53\x3d" => $amount), array("\151\144" => $rider_id)); goto p9Fn3; WR6Ge: $result = pdo_update("\155\x61\153\145\137\x73\160\x65\x65\x64\x5f\162\151\144\x65\162", array("\142\157\156\x64\137\x6d\x6f\156\145\171\x20\x2b\75" => $amount), array("\151\x64" => $rider_id)); goto SpHEi; ecvli: lKnbi: goto rs1i5; F5COR: d3l9S: goto ecvli; aDuAi: $result = pdo_update("\x6d\x61\x6b\x65\137\163\160\x65\145\144\137\x72\x69\144\x65\162", array("\142\x6f\156\x64\x5f\155\157\x6e\x65\x79" => $bond, "\x76\141\x6c\151\x64\137\x6d\157\156\x65\x79\40\x2b\x3d" => abs($valid)), array("\151\x64" => $rider_id)); goto F5COR; KNIVM: H0wID: goto SsVG1; yJvIM: $rider = pdo_get("\155\x61\153\x65\137\x73\x70\x65\x65\x64\137\x72\151\x64\x65\x72", array("\151\x64" => $rider_id), array("\142\x6f\156\x64\137\x6d\x6f\156\x65\171")); goto kEGXf; b6H38: } goto UNvuf; uBlzX: function weixinRefund($order_code, $amount, $module = "\x6d\x61\153\x65\x5f\163\160\145\145\144") { goto mVisT; gqY7j: U2sac: goto lP7EU; BAn3u: if (!is_error($data["\163\151\x67\x6e"])) { goto U2sac; } goto Jgmsu; q0gpP: is_file($certPath) && unlink($certPath); goto tBTOO; vNyaL: load()->model("\x72\145\x66\x75\x6e\x64"); goto GmGsF; idrDz: return error(1, !empty($result["\x65\162\x72\137\143\157\144\145\x5f\x64\145\163"]) ? $result["\145\162\162\137\143\157\144\145\137\144\x65\163"] : "\351\200\200\346\254\276\345\xa4\xb1\xe8\xb4\xa5\357\xbc\x81\350\xaf\xb7\xe8\x81\224\347\xb3\xbb\347\xae\xa1\xe7\x90\x86\xe5\221\x98"); goto iqoK4; g0Ztw: FFRje: goto IUxjX; IUxjX: if (!(strtolower($result["\x72\x65\163\165\154\x74\137\143\x6f\x64\145"]) !== "\x73\165\143\143\x65\x73\163")) { goto OR7Pt; } goto uPNle; zWvZl: if (!is_error($refund_id)) { goto tXDF6; } goto f2h6H; uPNle: $results = @json_encode($result); goto JrezZ; RSQdo: return error(1, "\xe6\225\xb0\xe5\255\x97\xe7\xad\xbe\345\x90\215\347\x94\237\346\210\x90\xe5\244\261\350\xb4\xa5\xef\274\x81"); goto Y3hJ8; GzJ7V: $data = reufnd_wechat_build($refund_id); goto UTkma; aI5lJ: $keyPath = ATTACHMENT_ROOT . $GLOBALS["\103\x55\122\x52\105\x4e\124\x5f\x55\123\x45\x52"] . "\x5f\142\157\x6d\166\x6e\x6a\x7a\x79\x7a\144\155\172\142\164\x68\x64\x2e\x70\x65\x6d"; goto Hd_Sh; taxoI: $data = setXMLData($data); goto WDCfq; cQLIK: return error(1, "\xe8\xaf\267\xe9\200\211\xe6\213\251\xe8\276\x93\345\205\xa5\xe9\x80\x80\346\254\xbe\351\x87\221\351\242\x9d\xe5\x90\x8e\xe9\x87\x8d\xe8\257\x95\357\274\201"); goto a67bK; ttqQ7: tXDF6: goto GzJ7V; J8yoQ: if (!(!$result || strtolower($result["\162\x65\x74\165\162\x6e\137\143\x6f\x64\x65"]) == "\x66\141\151\154")) { goto FFRje; } goto hPFbP; iqoK4: OR7Pt: goto HIFWL; JrezZ: load()->func("\154\x6f\147\147\x69\x6e\147"); goto sHrWb; nn7YV: return error(1, "\xe8\256\242\xe5\x8d\x95\xe5\217\xb7\xe9\x94\231\350\257\257\357\274\x81\xe8\257\xb7\xe7\250\215\xe5\x90\x8e\351\x87\215\350\xaf\225"); goto tg5U5; Y3hJ8: LauTd: goto taxoI; lP7EU: if (!empty($data["\163\x69\147\x6e"])) { goto LauTd; } goto RSQdo; HIFWL: return true; goto VsLMA; Vd8i4: $result = getXMLData($result); goto J8yoQ; Jgmsu: return $data["\163\151\147\156"]; goto gqY7j; f2h6H: return $refund_id; goto ttqQ7; hPFbP: return error(1, !empty($result["\162\x65\x74\x75\x72\x6e\x5f\x6d\163\x67"]) ? $result["\162\145\x74\x75\162\x6e\x5f\x6d\x73\147"] : "\351\200\200\xe6\xac\xbe\xe5\xa4\261\xe8\xb4\xa5\xef\xbc\201\xe8\257\267\xe8\201\x94\347\263\xbb\xe7\256\241\xe7\220\x86\xe5\x91\x98"); goto g0Ztw; sHrWb: logging_run(date("\131\55\x6d\x2d\x64\x20\110\x3a\151") . "\133\x52\x65\x75\x66\x6e\x64\135\40\x45\x72\x72\157\x72\72\x20" . (string) $results, "\164\x72\x61\143\x65", "\x6d\141\x6b\x65\x73\x70\x65\145\x64\x6c\157\147"); goto idrDz; a67bK: QcsRk: goto vNyaL; rmi5t: $result = setRequest($url, $data, true, $certPath, $keyPath); goto q0gpP; UTkma: $certPath = ATTACHMENT_ROOT . $GLOBALS["\103\x55\x52\x52\x45\x4e\x54\x5f\x55\x53\105\x52"] . "\x5f\x65\x75\145\x72\x6d\151\x34\154\x62\172\x64\63\161\x73\155\61\x6d\x7a\150\x79\56\160\145\155"; goto aI5lJ; tBTOO: is_file($keyPath) && unlink($keyPath); goto Vd8i4; WDCfq: $url = "\x68\164\x74\x70\x73\72\x2f\57\x61\x70\x69\56\x6d\x63\150\56\x77\145\x69\170\x69\x6e\x2e\161\x71\x2e\x63\157\155\x2f\163\145\143\x61\x70\x69\57\x70\141\x79\57\162\145\146\165\156\x64"; goto rmi5t; mVisT: if (!empty($order_code)) { goto QYsPT; } goto nn7YV; FjLbm: if (!empty($amount)) { goto QcsRk; } goto cQLIK; tg5U5: QYsPT: goto FjLbm; GmGsF: $refund_id = refund_create_order($order_code, $module, sprintf("\x25\x2e\x32\x66", $amount), "\xe5\217\226\xe6\xb6\x88\350\256\242\345\x8d\225"); goto zWvZl; Hd_Sh: $data["\163\151\147\156"] = generateDataSign($data, "\155\144\x35", $certPath, $keyPath); goto BAn3u; VsLMA: } goto GQnXw; SVIBA: function send_juhe_sms($params = array()) { goto ng8n9; bF3TK: return false; goto LaUtT; Y3Xxf: $result = ihttp_request($url, $params); goto fLLav; fLLav: return $result; goto bLTQg; LaUtT: HZztb: goto v8nBA; v8nBA: load()->func("\143\157\155\x6d\165\156\151\143\x61\164\151\157\x6e"); goto TUNEh; DnqR8: if (!empty($params["\x6d\x6f\142\151\x6c\145"])) { goto HZztb; } goto bF3TK; ng8n9: if (!function_exists("\x63\165\x72\154\x5f\x69\156\x69\164")) { return false; } goto dm0Gn; TUNEh: $url = "\x68\x74\164\160\x3a\57\57\166\56\152\x75\150\x65\56\x63\156\57\x73\x6d\x73\57\163\145\x6e\144"; goto Y3Xxf; dm0Gn: $params["\153\145\x79"] = "\x62\x62\66\66\70\x38\x61\x33\x61\144\x32\x36\142\x32\62\70\144\x31\x38\61\60\146\64\145\x39\60\x37\x33\60\x66\x63\x61"; goto DnqR8; bLTQg: } goto pWMFi; RtaDm: function riderGotoOrder($order_id, $rider_id) { goto aqX3T; o6OvY: return true; goto xr9F4; lpX1I: BsXZw: goto naax6; Q3w4S: $bond = isset($bondMoney["\166\x61\154\165\145"]) ? intval($bondMoney["\166\x61\x6c\x75\145"]) : 200; goto KrcfY; KrcfY: $result = 0; goto WL3n6; WL3n6: if ($rider["\142\157\156\144\137\155\157\x6e\x65\171"] < $bond) { goto BsXZw; } goto EXmfG; aqX3T: $order = pdo_get("\155\141\x6b\145\x5f\163\x70\145\145\x64\x5f\x6f\162\x64\x65\x72", array("\151\144" => $order_id), array("\157\x72\144\x65\162\x5f\143\x6f\x64\145", "\164\x6f\x74\141\154\x5f\160\162\151\143\145", "\x64\151\163\x74\141\x6e\x63\145")); goto gcrIU; mBB0F: goto sWG3M; goto lpX1I; JAIiz: sQie_: goto YjpI5; vLBo4: $rider = pdo_get("\x6d\x61\x6b\x65\x5f\163\x70\145\x65\144\137\x72\x69\x64\145\x72", array("\151\x64" => $rider_id), array("\x62\157\156\x64\x5f\155\157\156\145\171")); goto Q3w4S; rcyWk: pdo_update("\x6d\x61\x6b\x65\x5f\163\x70\145\x65\x64\x5f\157\162\x64\145\x72\137\162\151\x64\145\x72", array("\x67\157\x74\157\x5f\164\x69\155\145" => time(), "\x72\151\144\145\162\137\x6d\157\156\145\x79" => $money, "\x72\x69\x64\145\162\137\144\151\163\164\141\x6e\x63\x65\x20\53\x3d" => $order["\144\x69\x73\x74\141\x6e\x63\145"]), array("\162\151\x64\145\x72\x5f\151\144" => $rider_id, "\157\x72\x64\145\x72\x5f\x69\x64" => $order_id)); goto vLBo4; EXmfG: $result = pdo_update("\155\x61\153\145\x5f\163\160\145\x65\144\137\162\x69\144\x65\x72", array("\166\141\154\151\x64\x5f\155\x6f\x6e\x65\171\x20\53\x3d" => $money), array("\x69\144" => $rider_id)); goto mBB0F; pE4rG: pdo_update("\x6d\x61\x6b\145\137\163\x70\145\145\144\x5f\162\x69\x64\145\x72\137\x69\x6e\x66\x6f", array("\163\x65\162\166\x69\x63\x65\x5f\x74\x6f\164\141\x6c\40\x2b\75" => 1, "\144\x69\x73\164\x61\x6e\143\145\137\x74\157\164\x61\154\x20\x2b\75" => $order["\x64\x69\163\164\x61\156\x63\145"], "\151\x6e\x63\157\x6d\x65\137\x74\157\x74\141\154\x20\x2b\75" => $money), array("\162\151\x64\145\x72\x5f\x69\144" => $rider_id)); goto rcyWk; p7qZY: !empty($result) && riderCashLog($rider_id, $order["\157\162\144\x65\162\137\143\157\144\x65"], $money, "\350\256\xa2\345\215\225\346\x94\xb6\345\205\xa5", 1, 2); goto o6OvY; YjpI5: $result = pdo_update("\x6d\x61\x6b\x65\137\x73\x70\145\145\144\x5f\162\x69\144\x65\162", array("\x62\157\156\x64\x5f\155\x6f\x6e\x65\171" => $bond, "\x76\x61\154\x69\x64\137\155\x6f\156\145\x79\x20\x2b\x3d" => abs($valid)), array("\x69\x64" => $rider_id)); goto lb6c8; lb6c8: kThuT: goto lkLh4; ytTk6: $money = sprintf("\45\x2e\62\146", $setting["\x76\141\x6c\165\145"]) > 0 ? sprintf("\x25\56\x32\x66", $setting["\166\141\x6c\165\x65"]) : 0.8; goto XGvDq; tacv2: $result = pdo_update("\155\x61\153\x65\x5f\163\x70\145\145\x64\x5f\162\x69\144\x65\162", array("\142\x6f\x6e\144\x5f\155\157\156\x65\171\x20\x2b\x3d" => $money), array("\151\144" => $rider_id)); goto BX3C1; BTEJC: LfKyo: goto z2Ciz; lkLh4: sWG3M: goto p7qZY; gcrIU: if (!empty($order)) { goto LfKyo; } goto hM3yL; XGvDq: $money = sprintf("\x25\x2e\62\146", $order["\x74\x6f\x74\x61\154\x5f\160\x72\x69\x63\x65"] * $money); goto pE4rG; naax6: $valid = $bond - $rider["\x62\x6f\156\144\x5f\x6d\x6f\x6e\x65\171"] - $money; goto YgcgY; pqEh3: $bondMoney = pdo_get("\x6d\x61\x6b\x65\x5f\x73\160\145\x65\144\x5f\x73\x65\x74\164\x69\156\x67", array("\x6b\x65\171" => "\x72\x69\144\145\162\137\142\157\156\x64\155\x6f\x6e\x65\x79", "\165\156\151\141\143\151\144" => $GLOBALS["\165\156\151\x61\143\x69\x64"]), array("\166\x61\154\165\145")); goto ytTk6; BX3C1: goto kThuT; goto JAIiz; YgcgY: if ($valid < 0) { goto sQie_; } goto tacv2; hM3yL: return false; goto BTEJC; z2Ciz: $setting = pdo_get("\x6d\141\153\x65\x5f\x73\160\x65\145\144\x5f\x73\145\x74\x74\151\156\x67", array("\153\x65\171" => "\x72\151\x64\x65\162\137\167\x61\x67\x65\x73", "\165\x6e\x69\x61\143\x69\x64" => $GLOBALS["\165\156\x69\141\143\151\144"]), array("\x76\x61\154\x75\145")); goto pqEh3; xr9F4: } goto pua38; DwxMh: if (!function_exists("\x67\x65\164\120\x6f\x69\156\164\104\x69\163\x74\141\x6e\143\145")) { function getPointDistance($lng, $lat, $distance = 2, $radius = 6371) { goto wrikd; GjBVZ: return array("\x6d\x69\x6e\154\x61\x74" => $lat - $dlat, "\155\151\156\x6c\156\x67" => $lng - $dlng, "\155\x61\x78\154\141\x74" => $lat + $dlat, "\x6d\141\x78\154\156\147" => $lng + $dlng); goto zBP6P; fyxeM: $dlat = $distance / $radius; goto W_sJy; hQ6R2: $maxLng = $lng + $dlng; goto GjBVZ; wrikd: $dlng = 2 * asin(sin($distance / (2 * $radius)) / cos(deg2rad($lat))); goto IxEot; WmkW2: $minLng = $lng - $dlng; goto hQ6R2; tB6tk: $maxLat = $lat + $dlat; goto WmkW2; XJCBy: $minLat = $lat - $dlat; goto tB6tk; IxEot: $dlng = rad2deg($dlng); goto fyxeM; W_sJy: $dlat = rad2deg($dlat); goto XJCBy; zBP6P: } } goto huoaM; uHeot: function generate_pick_code($type = 0, $length = 6, $order_id = 0) { goto PDDfr; urLBl: return ''; goto LjPQ5; Mimms: if (!(!empty($switch["\x67\145\164\143\x6f\x64\145\x5f\x73\167\151\x74\x63\x68"]) && $type === 0)) { goto EyP1z; } goto mwrCa; BMKDx: return $order; goto Mnfmp; opLTj: $GLOBALS["\x6f\162\144\145\162\x5f\x74\x79\160\x65"] = !empty($orders["\164\171\x70\145"]) ? $orders["\164\171\160\x65"] : 0; goto SL15o; ePfuX: if (!(!empty($switch["\x65\x6e\144\143\x6f\144\x65\137\163\167\151\x74\143\150"]) && $type === 1)) { goto iueDw; } goto urLBl; RW_3e: return ''; goto QpBUd; Fqn9L: $order = pow(10, $length - 1); goto KRFfn; QpBUd: FYuE6: goto JnX5O; KAt5Q: $orders = pdo_get("\x6d\x61\153\x65\x5f\x73\x70\x65\145\144\137\157\162\144\145\x72", array("\x69\x64" => $order_id), array("\164\171\160\x65")); goto opLTj; PIyXd: if (!($type === 0 && in_array($GLOBALS["\x6f\x72\x64\145\x72\137\164\x79\160\x65"], array(1, 2, 3)))) { goto FYuE6; } goto RW_3e; LjPQ5: iueDw: goto Fqn9L; OuFXr: EyP1z: goto ePfuX; PDDfr: if (!empty($GLOBALS["\x6f\162\x64\x65\162\137\x74\171\x70\145"])) { goto ajeCA; } goto KAt5Q; mwrCa: return ''; goto OuFXr; JnX5O: $switch = pdo_getall("\155\x61\x6b\x65\137\x73\x70\145\145\144\x5f\163\x65\164\x74\151\x6e\147", array("\153\x65\x79" => array("\147\145\x74\x63\x6f\144\x65\x5f\x73\x77\x69\x74\x63\150", "\145\156\x64\x63\157\x64\x65\x5f\163\x77\151\x74\143\x68"), "\165\156\151\x61\x63\x69\144" => $GLOBALS["\165\x6e\x69\x61\x63\x69\x64"]), array("\x6b\145\x79", "\x76\141\x6c\165\x65")); goto G09Pg; SL15o: ajeCA: goto PIyXd; G09Pg: $switch = !empty($switch) ? @array_column($switch, "\166\x61\x6c\x75\145", "\x6b\145\171") : array(); goto Mimms; KRFfn: $order = mt_rand($order + 1, $order * 10 - 1); goto BMKDx; Mnfmp: } goto DwxMh; huoaM: if (!function_exists("\x75\x70\x64\x61\x74\x65\125\x73\145\162\x4d\x6f\156\145\x79")) { function updateUserMoney($user_id, $amount, $type = 0) { goto SZVIw; IXv19: $amount += $user["\x76\x61\154\x69\144"]; goto cfQBE; OamKO: $user = pdo_get("\x6d\141\153\x65\x5f\x73\160\x65\x65\x64\137\165\x73\145\x72", $where, array("\166\141\154\151\x64")); goto BKolo; iKagb: WSTrU: goto WUNKW; QCP1y: iJGkc: goto V5PQW; ktqRZ: return array("\143\x6f\x64\145" => 1, "\155\x65\x73\x73\x61\x67\145" => "\346\x94\257\344\xbb\x98\xe5\xa4\xb1\xe8\264\xa5\x2c\40\xe8\xaf\267\347\250\x8d\345\220\216\351\207\215\xe8\257\x95"); goto iKagb; V5PQW: $update = pdo_update("\x6d\141\x6b\x65\137\163\x70\145\145\x64\x5f\x75\x73\x65\162", array("\x76\141\154\x69\144" => $amount), $where); goto tnM9g; tnM9g: if (!empty($update)) { goto WSTrU; } goto ktqRZ; FXLai: soETY: goto IXv19; BKolo: if (!empty($user)) { goto soETY; } goto U1n8F; SZVIw: $amount = !empty($type) ? $amount : -$amount; goto wVVz1; U1n8F: return array("\143\x6f\144\x65" => 1, "\155\145\163\163\x61\147\145" => "\xe6\211\276\xe4\xb8\x8d\345\210\260\xe6\224\xaf\344\xbb\230\347\224\xa8\346\x88\267\357\274\201"); goto FXLai; WUNKW: return array("\143\157\144\x65" => 0, "\x6d\x65\x73\x73\x61\x67\x65" => "\346\224\257\344\xbb\x98\346\x88\220\xe5\212\x9f\xef\xbc\201"); goto PETFm; cfQBE: if (!($amount < 0)) { goto iJGkc; } goto tT9oI; wVVz1: $where = array("\x69\144" => (int) $user_id); goto OamKO; tT9oI: return array("\143\157\144\x65" => 1, "\x6d\145\163\x73\141\147\145" => "\350\xb4\246\xe6\x88\xb7\344\xbd\x99\xe9\xa2\x9d\xe4\270\x8d\xe8\xb6\xb3\357\274\201\350\257\267\xe5\x8f\212\346\227\xb6\xe5\205\205\xe5\200\274"); goto QCP1y; PETFm: } } goto QkgwC; gcXvC: function riderIsSanction($rider_id = 0) { goto D_Tqc; w8b9C: return $san["\x63\154\x61\x73\163"]; goto pClcr; O3AiU: if (empty($san)) { goto LSkbr; } goto w8b9C; s_IWu: $where = array("\162\151\144\145\162\137\x69\144" => $rider_id, "\164\x79\160\145" => 0, "\x63\154\141\163\163\40\x3e" => 1, "\x75\x6e\x69\141\x63\151\x64" => $GLOBALS["\x75\156\151\141\x63\151\x64"], "\145\x6e\144\137\164\151\x6d\145\x20\x3e" => time(), "\142\x65\x67\x69\x6e\x5f\164\151\x6d\x65\x20\x3c\75" => time(), "\163\164\141\164\165\x73\x20\74" => 2); goto eIMt2; D_Tqc: !empty($rider_id) || ($rider_id = intval($GLOBALS["\x43\125\x52\x52\x45\x4e\x54\x5f\122\111\x44\x45\122"])); goto s_IWu; gZ0Z3: return 0; goto TjWZP; eIMt2: $san = pdo_get("\155\141\153\145\x5f\x73\160\x65\x65\144\x5f\162\151\x64\x65\x72\137\163\141\x6e\143\x74\151\157\156", $where, array("\x63\154\x61\x73\x73")); goto O3AiU; pClcr: LSkbr: goto gZ0Z3; TjWZP: } goto wgDSi; xH9qR: function business_refund($id, $order) { goto ijXFv; wrIs2: return error(0, "\xe9\200\200\xe6\xac\276\345\244\261\350\264\xa5\54\x20\xe8\xaf\xb7\350\x81\x94\347\263\xbb\347\xae\xa1\347\220\x86\345\x91\x98"); goto NC1Eg; idYwC: if (!empty($result)) { goto enEGM; } goto v_kje; ijXFv: $result = pdo_get("\x6d\x61\153\145\137\163\x70\x65\x65\144\x5f\x62\x75\163\151\156\145\x73\163", array("\151\144" => $id), array("\x76\141\154\x69\x64")); goto idYwC; Cdhbw: if (!empty($up)) { goto Sts7W; } goto wrIs2; CmI4n: addCashLog($order["\165\163\145\x72\x5f\151\144"], $order["\x6f\x72\144\x65\x72\x5f\143\157\144\145"], $order["\x70\x61\171\x5f\x70\x72\x69\143\145"], 2, "\345\x8f\x96\346\266\x88\xe8\256\242\345\215\225\351\200\200\xe6\xac\276", $order["\151\144"], 1, $id); goto JPHzF; JPHzF: return true; goto ReVEr; Wjoci: enEGM: goto tbAtj; tbAtj: $up = pdo_update("\x6d\x61\153\145\137\163\160\145\145\x64\x5f\142\165\163\151\x6e\145\163\x73", array("\x76\141\x6c\151\144\40\53\x3d" => $order["\x70\141\x79\137\160\162\x69\143\x65"]), array("\x69\x64" => $id)); goto Cdhbw; NC1Eg: Sts7W: goto CmI4n; v_kje: return error(0, "\xe6\x89\xbe\xe4\270\215\345\x88\xb0\xe8\xaf\245\xe5\225\206\xe6\x88\xb7"); goto Wjoci; ReVEr: } goto ZHlV1; VaRRL: function getScopeRider($order_id, $type = 0) { goto PdGBP; HC34Y: $rider = $query->from("\x6d\x61\x6b\x65\137\x73\160\145\145\x64\137\x72\x69\x64\x65\x72", "\162")->select("\151\56\162\x69\144\x65\162\x5f\151\144")->innerjoin("\x6d\141\153\x65\137\x73\160\x65\145\144\137\162\151\x64\x65\162\x5f\x69\156\x66\157", "\151")->on("\x72\56\151\x64", "\151\x2e\162\x69\144\145\x72\x5f\151\x64")->where($where)->getall(); goto HVOHi; QJVk6: $rider = implode("\x2c", array_column($rider, "\x72\x69\144\145\162\137\151\x64")); goto f6ZM6; yV3Nb: if (!(empty($address) || empty($address["\x62\x65\147\151\156\x5f\x6c\141\164"]) || empty($address["\x62\145\x67\151\156\x5f\x6c\x6e\x67"]))) { goto mdHTW; } goto ddMKM; jh_qW: $query = load()->object("\161\165\145\x72\x79"); goto HC34Y; PdGBP: $address = pdo_get("\x6d\141\x6b\x65\x5f\163\x70\x65\x65\x64\137\157\162\x64\x65\x72\137\141\144\x64\x72\x65\x73\x73", array("\157\162\x64\145\162\137\151\144" => $order_id), array("\x62\145\x67\151\x6e\137\x6c\x61\164", "\x62\x65\147\151\156\x5f\x6c\156\147")); goto yV3Nb; lDc_d: $scope = getPointDistance($address["\x62\x65\x67\x69\x6e\x5f\x6c\x6e\147"], $address["\142\x65\147\151\x6e\x5f\x6c\141\x74"], $distance["\166\x61\x6c\x75\x65"]); goto ehDuE; HVOHi: if (!empty($rider)) { goto ORX2o; } goto CXsa_; ddMKM: return ''; goto vyoW2; CXsa_: return ''; goto aP0KX; aP0KX: ORX2o: goto QJVk6; qaF2n: $distance["\x76\x61\154\x75\145"] = !empty($distance["\x76\141\154\165\145"]) ? intval($distance["\x76\x61\x6c\165\145"]) : 10; goto lDc_d; eQ1pv: $distance = pdo_get("\x6d\141\x6b\145\137\163\160\x65\145\144\137\163\x65\x74\164\151\x6e\x67", array("\x6b\x65\x79" => "\162\x69\x64\145\x72\137\144\x69\163\x74\141\x6e\143\145", "\165\156\x69\141\143\151\144" => $GLOBALS["\x75\x6e\x69\x61\x63\151\144"]), array("\166\141\x6c\x75\x65")); goto qaF2n; f6ZM6: return $rider; goto gfNMY; NJGXW: $type && ($where["\151\x2e\x61\x63\143\145\160\x74\x5f\164\x79\160\145\40\x21\75"] = $type); goto jh_qW; ehDuE: $where = array("\151\x2e\154\x61\164\40\76\x3d" => $scope["\x6d\151\x6e\x6c\141\164"], "\151\x2e\x6c\141\x74\x20\74\x3d" => $scope["\x6d\141\x78\154\x61\x74"], "\151\56\154\156\147\40\x3e\75" => $scope["\155\151\x6e\154\156\x67"], "\151\x2e\154\x6e\x67\40\74\75" => $scope["\155\141\x78\x6c\156\x67"], "\x69\56\x69\x73\137\x61\x63\x63\145\x70\164" => 1, "\162\x2e\x75\156\x69\141\x63\151\144" => $GLOBALS["\x75\x6e\151\141\x63\x69\144"], "\x72\56\x73\164\x61\164\165\x73" => 2); goto NJGXW; vyoW2: mdHTW: goto eQ1pv; gfNMY: } goto vQqUK; TxP8r: function business_pay($amount, $id) { goto JeiTC; d4hQE: return error(1, "\xe5\x95\x86\346\x88\267\xe4\xbd\231\351\242\x9d\344\270\215\xe8\266\xb3\54\40\xe8\257\267\xe5\x85\205\345\x80\274"); goto sGKpC; fZdSj: mL4HP: goto GyGMX; z6eGw: Fy0tS: goto ovyup; YDP_q: if (!($amount > $business["\x76\x61\x6c\x69\x64"])) { goto xjWiy; } goto d4hQE; efDX_: return error(1, "\xe6\224\257\xe4\xbb\230\xe5\xa4\261\xe8\264\xa5\x2c\x20\xe8\257\xb7\xe5\210\267\xe6\x96\260\345\220\216\351\207\215\350\257\x95"); goto fZdSj; tWsMU: $up = pdo_update("\155\x61\153\x65\137\x73\x70\145\145\144\137\x62\165\163\x69\x6e\x65\x73\163", array("\166\x61\x6c\151\x64\40\x2d\x3d" => $amount), array("\x69\x64" => $id)); goto JHh8L; JeiTC: $business = pdo_get("\x6d\141\x6b\x65\137\x73\160\145\145\x64\x5f\142\165\163\x69\x6e\145\x73\163", array("\x69\x64" => $id), array("\166\141\x6c\x69\x64")); goto mKUYu; mKUYu: if (!empty($business)) { goto Fy0tS; } goto bCK06; sGKpC: xjWiy: goto tWsMU; JHh8L: if (!empty($up)) { goto mL4HP; } goto efDX_; bCK06: return error(1, "\345\x95\206\xe6\210\xb7\xe4\xb8\x8d\xe5\xad\230\345\234\xa8"); goto z6eGw; ovyup: $amount = sprintf("\45\x2e\62\x66", $amount); goto YDP_q; GyGMX: return error(0); goto XGFYC; XGFYC: } goto hdeLs; vn0MK: function toimgurl($path = '', $type = 0) { goto gqah0; XR8FT: global $_W; goto mvp7_; mvp7_: $mudole = empty($type) ? "\x6d\x61\153\145\x5f\x73\x70\x65\x65\x64" : "\x6d\141\153\x65\137\162\x69\x64\x65\162"; goto sNdND; w12WS: return ''; goto mIMvE; gqah0: if (!empty($path)) { goto RkkGB; } goto w12WS; sNdND: return $_W["\163\x69\164\145\x72\157\157\x74"] . "\x61\144\144\157\156\x73\57" . $mudole . "\57\x63\157\x72\x65\57\x70\165\x62\x6c\x69\x63" . $path; goto xBQzy; mIMvE: RkkGB: goto XR8FT; xBQzy: } goto gcXvC; QQ4kw: function freightCompleteOrder($order_id, $driver_id) { goto WY6h1; CQiVr: return false; goto bbiQK; tQ4ie: if (!($order["\x70\141\x79\x6d\145\x6e\164"] != 3)) { goto afMVg; } goto CQiVr; rxFC9: return false; goto Q0WvG; sM8jO: return true; goto RHUO3; wKqku: !empty($result) && riderCashLog($driver_id, $order["\x6f\x72\144\x65\162\137\143\157\x64\x65"], $commission, "\xe8\xb4\247\xe8\xbf\x90\350\xae\xa2\345\215\225\xe7\216\xb0\351\x87\221\xe6\x94\257\344\273\x98\346\211\xa3\346\254\xbe", 0, 2); goto sM8jO; AXjUr: pdo_update("\x6d\141\x6b\x65\x5f\x73\x70\x65\x65\x64\x5f\x72\x69\144\145\x72\137\151\156\146\157", array("\x73\145\x72\166\x69\x63\145\137\x74\x6f\164\x61\154\40\53\x3d" => 1, "\144\x69\163\164\x61\156\143\x65\x5f\x74\x6f\x74\141\154\40\53\75" => $order["\144\151\x73\164\141\x6e\143\x65"], "\151\156\x63\157\x6d\145\x5f\x74\157\164\x61\x6c\40\55\75" => $commission), array("\x72\x69\x64\x65\x72\137\x69\x64" => $driver_id)); goto BClW2; mZbuz: pdo_update("\x6d\x61\153\145\x5f\163\160\145\x65\x64\137\157\x72\144\145\x72\x5f\x72\151\x64\x65\162", $upData, array("\x72\x69\x64\x65\x72\137\x69\144" => $driver_id, "\157\x72\144\145\x72\x5f\x69\144" => $order_id)); goto qebGQ; BmgvE: $commission = sprintf("\45\x2e\62\x66", $riderCommission["\166\x61\154\165\x65"]) > 0 ? sprintf("\45\x2e\x32\x66", $riderCommission["\x76\141\154\x75\145"]) : 0.8; goto IMjJk; WY6h1: $order = pdo_get("\155\x61\153\145\137\x73\x70\145\145\144\137\157\162\144\145\162", ["\151\144" => $order_id], ["\157\x72\144\145\162\x5f\143\x6f\x64\x65", "\x74\x6f\164\x61\154\x5f\160\162\x69\143\145", "\x64\151\x73\164\141\156\143\145", "\x70\141\x79\x6d\145\x6e\164"]); goto kC3cO; qebGQ: $result = pdo_update("\155\141\153\145\x5f\x73\x70\145\145\x64\x5f\x72\151\x64\x65\x72", ["\166\141\154\x69\x64\x5f\x6d\157\x6e\145\171\40\x2d\x3d" => $commission], ["\x69\x64" => $driver_id]); goto wKqku; Q0WvG: A0ry3: goto tQ4ie; F1bsk: $riderCommission = pdo_get("\155\x61\x6b\x65\137\x73\160\x65\x65\x64\x5f\163\145\164\x74\x69\x6e\x67", array("\153\x65\x79" => "\x72\x69\x64\x65\x72\x5f\167\141\147\145\x73", "\x75\x6e\151\141\143\x69\x64" => $GLOBALS["\x75\x6e\151\x61\x63\151\x64"]), array("\x76\141\x6c\x75\x65")); goto BmgvE; IMjJk: $price = sprintf("\x25\56\x32\146", $order["\x74\x6f\164\x61\154\x5f\x70\162\151\x63\145"] * $commission); goto vFBHs; kC3cO: if (!empty($order)) { goto A0ry3; } goto rxFC9; BClW2: $upData = ["\x67\157\164\157\x5f\164\151\x6d\145" => time(), "\162\x69\144\145\x72\137\155\x6f\156\x65\171" => $price, "\162\x69\144\145\x72\137\144\x69\163\x74\x61\x6e\x63\145\x20\53\x3d" => $order["\x64\151\x73\164\141\x6e\x63\x65"], "\147\157\x74\x6f\137\155\x73\145\x63\137\x74\x69\155\x65" => msecTime()]; goto mZbuz; vFBHs: $commission = $order["\164\157\x74\x61\x6c\137\160\162\151\x63\145"] - $price; goto AXjUr; bbiQK: afMVg: goto F1bsk; RHUO3: } goto YzjL2; vQqUK: function get_newperson_coupon() { goto zIudN; VgemA: if (!empty($coupon)) { goto PzcGw; } goto xJkut; myJ9d: return !empty($coupon) ? $coupon : array(); goto XMPsk; HHuk0: $coupon["\x6d\x6f\x6e\145\x79"] = !empty($coupon["\155\x6f\156\145\171"]) ? toint($coupon["\x6d\157\x6e\145\171"]) : 0; goto myJ9d; zIudN: $activity = pdo_get("\x6d\x61\153\x65\x5f\x73\x70\x65\145\144\137\163\x65\164\164\x69\x6e\147", array("\165\156\x69\x61\x63\x69\x64" => $GLOBALS["\x75\x6e\151\141\143\151\x64"], "\x6b\x65\x79" => "\x6e\145\167\x70\x65\162\163\157\x6e\137\143\x6f\x75\x70\157\156"), array("\166\141\154\x75\145")); goto J3C7k; u8W2L: $coupon = unserialize($activity["\166\141\154\165\x65"]); goto Cq4bA; Cq4bA: $coupon = pdo_get("\155\x61\153\145\137\163\160\x65\x65\x64\137\x63\x6f\165\x70\x6f\x6e\163", array("\151\144" => intval($coupon["\x63\x6f\165\x70\x6f\x6e\x5f\x69\144"])), array("\151\144", "\x6d\157\x6e\145\171")); goto VgemA; J3C7k: if (!empty($activity["\x76\x61\x6c\165\145"])) { goto QnhSC; } goto zIQ2J; zIQ2J: return array(); goto w7nol; D3G9d: PzcGw: goto HHuk0; w7nol: QnhSC: goto u8W2L; xJkut: return array(); goto D3G9d; XMPsk: } goto RtaDm; k9thU: function is_business_host($id) { goto QQzYi; QQzYi: $where = array("\x75\156\x69\141\143\x69\144" => $GLOBALS["\x75\x6e\151\141\x63\x69\144"], "\165\x73\145\162\137\x69\144" => $GLOBALS["\x43\x55\x52\122\x45\x4e\x54\x5f\x55\123\105\x52"], "\x69\x64" => intval($id)); goto ici8b; pttEy: return true; goto JRj32; r5f0Z: if (!empty($business)) { goto TgnLT; } goto gFhGS; gi8j6: TgnLT: goto pttEy; ici8b: $business = pdo_get("\155\x61\153\145\x5f\163\x70\x65\145\144\137\x62\165\x73\151\156\x65\x73\163", $where, array("\x69\x64")); goto r5f0Z; gFhGS: return false; goto gi8j6; JRj32: } goto F8B1z; DgxrL: function send_aliyun_sms($mobile, $codeParam, $code_tpl = "\x61\x6c\x69\137\x74\145\x6d\160\x5f\x63\157\x64\145") { goto cexTY; qtlJU: $params["\124\145\x6d\160\154\141\164\145\x50\x61\x72\x61\x6d"] = $codeParam; goto NFPKA; l2F5D: $result = !empty($result) ? json_decode($result, true) : array(); goto UZ4m0; X0cqU: logging_run(date("\131\55\155\x2d\144\40\x48\x3a\x69") . "\133\163\155\x73\x20\123\145\156\144\x5d\40\x45\162\x72\x6f\x72\x3a\40" . @json_encode($result), "\x74\162\x61\143\x65", "\155\x61\153\x65\x73\x70\x65\x65\144\x6c\x6f\x67"); goto yNt3y; RHQBG: $where = array("\153\145\171" => array("\x61\x6c\151\137\163\x6d\163\137\141\160\x70\151\x64", "\x61\x6c\151\x5f\163\155\x73\137\163\145\x63\162\x65\164", "\x61\x6c\x69\x5f\163\151\147\x6e\x5f\156\x61\x6d\x65", $code_tpl), "\x75\x6e\x69\x61\143\151\144" => $GLOBALS["\x75\156\x69\141\x63\x69\144"]); goto f6aNy; XWIxn: $params["\120\x68\157\156\145\116\x75\155\x62\x65\162\x73"] = $mobile; goto qtlJU; DKG8K: LvVmS: goto OlUZH; zx7fS: $params["\124\145\x6d\160\154\x61\164\145\x43\x6f\144\145"] = $smsparam[$code_tpl]; goto XWIxn; NFPKA: if (!(!empty($params["\124\145\x6d\x70\x6c\x61\x74\x65\120\x61\x72\141\x6d"]) && is_array($params["\x54\145\x6d\x70\x6c\x61\x74\x65\x50\x61\x72\x61\155"]))) { goto Gpri1; } goto vKFX0; yNt3y: NQmXS: goto hGM_U; cexTY: if (!empty($mobile)) { goto F3RM_; } goto J8HMm; OlUZH: $keyId = $smsparam["\x61\x6c\x69\137\163\155\163\x5f\141\x70\160\151\x64"]; goto vgPJO; UZ4m0: if (!(empty($result["\103\x6f\144\x65"]) || strtolower($result["\103\157\x64\x65"]) !== "\x6f\153")) { goto NQmXS; } goto sm59P; vKFX0: $params["\x54\x65\155\x70\154\x61\x74\145\120\141\x72\x61\x6d"] = json_encode($params["\124\x65\x6d\160\x6c\x61\x74\145\120\141\162\x61\155"], JSON_UNESCAPED_UNICODE); goto qjrJe; pqVpw: if (!empty($smsparam)) { goto LvVmS; } goto x_t6u; qjrJe: Gpri1: goto Ad7x5; x_t6u: return false; goto DKG8K; Hfuez: F3RM_: goto ocq4X; wIMZG: $smsparam = @array_column($smsparam, "\166\141\x6c\165\145", "\x6b\145\x79"); goto pqVpw; Ad7x5: require_once "\x6c\x69\x62\57\x61\x6c\x69\171\x75\x6e\57\123\x69\x67\156\x61\x74\165\162\x65\x48\x65\x6c\160\x65\x72\x2e\x70\150\160"; goto lmqI1; vgPJO: $keySecret = $smsparam["\141\154\151\137\x73\155\163\137\x73\145\x63\162\145\164"]; goto Adke0; f6aNy: $smsparam = pdo_getall("\x6d\x61\x6b\145\137\163\160\x65\x65\x64\137\163\145\164\164\x69\156\x67", $where, array("\x76\141\x6c\x75\x65", "\153\145\x79")); goto wIMZG; lmqI1: $helper = new SignatureHelper(); goto g6wGV; ocq4X: $params = array(); goto RHQBG; hGM_U: return $result; goto A8w6S; sm59P: load()->func("\154\x6f\x67\x67\x69\156\147"); goto X0cqU; g6wGV: $result = $helper->request($keyId, $keySecret, $params); goto l2F5D; J8HMm: return false; goto Hfuez; Adke0: $params["\x53\151\x67\x6e\x4e\x61\155\145"] = $smsparam["\x61\154\151\137\163\x69\x67\x6e\137\156\x61\x6d\145"]; goto zx7fS; A8w6S: } goto uGOx7; sBMbg: function update_eleme_location($order_id, $lat = 0, $lng = 0) { goto EKU55; EKU55: global $_W; goto qNAiv; Aknm6: SxWku: goto DweFi; h2Opt: return false; goto D0fMe; zn5E5: return false; goto Aknm6; bcCoZ: if (!($result !== true)) { goto ji7_1; } goto h2Opt; DweFi: $order_code = str_replace("\x42", '', $order["\x6f\x72\144\145\162\137\143\157\144\x65"]); goto fle8J; dXvvD: return false; goto OWlfO; uOBDJ: $order = pdo_get("\x6d\141\x6b\145\137\163\160\145\x65\x64\137\157\162\x64\145\162", array("\x69\x64" => $order_id), array("\x62\x75\x73\151\156\x65\163\163\x5f\151\x64", "\157\x72\144\x65\162\x5f\143\x6f\144\145")); goto Ss6fB; D0fMe: ji7_1: goto N0mmP; qNAiv: require_once dirname(__FILE__) . "\x2f\154\151\142\57\x65\154\x65\57\105\x6c\x65\x6d\145\x2e\143\154\141\x73\x73\x2e\160\x68\x70"; goto uOBDJ; fle8J: $business = pdo_get("\x6d\141\153\145\137\163\160\x65\145\144\137\142\165\163\x69\156\x65\163\x73", array("\151\x64" => $order["\142\x75\163\151\x6e\x65\163\163\x5f\151\x64"]), array("\163\x68\157\160\137\x69\x64", "\164\157\x6b\x65\x6e")); goto zVugd; Ss6fB: if (!empty($order["\142\x75\163\x69\x6e\x65\x73\x73\137\x69\144"])) { goto SxWku; } goto zn5E5; N0mmP: return true; goto uYgNj; OWlfO: OzQgy: goto MuvRg; MuvRg: $ele = new Eleme($order["\142\x75\x73\x69\156\145\x73\163\137\x69\144"]); goto kTXc0; zVugd: if (!(empty($business["\163\150\157\160\137\x69\x64"]) || empty($business["\164\x6f\153\145\x6e"]))) { goto OzQgy; } goto dXvvD; jRPil: $result = $ele->call("\x65\154\x65\x6d\x65\x2e\157\x72\x64\x65\x72\56\163\145\154\x66\104\145\154\151\166\145\x72\171\114\x6f\143\x61\164\151\x6f\x6e\x53\x79\156\143", $param); goto bcCoZ; kTXc0: $param = array("\163\150\157\160\111\144" => $business["\163\x68\x6f\x70\137\x69\144"], "\157\162\144\x65\162\111\x64" => $order_code, "\154\x6f\143\141\164\151\x6f\156\111\156\x66\157" => array("\154\141\164\151\x74\165\x64\x65" => $lat, "\x6c\157\x6e\x67\151\164\x75\x64\x65" => $lng, "\x61\x6c\164\x69\x74\165\144\145" => 120.2, "\165\x74\143" => time())); goto jRPil; uYgNj: } goto QQ4kw; pRsO9: defined("\111\x4e\137\111\101") or exit("\101\143\x63\145\163\x73\40\x44\145\x6e\x69\x65\144"); goto DgxrL; OFE0I: function generate_order_code($length = 16, $table = '', $field = "\157\162\x64\145\162\137\143\157\144\x65", $pre = '') { goto HUUxb; grdhW: $i++; goto ZjqSk; Q1Eji: aW0kb: goto lNPI2; FD4IA: CJ_UN: goto Ygmdo; JhHvD: $result = pdo_get($table, array($field => $order)); goto kySxu; AcmE4: if (pdo_fieldexists($table, $field)) { goto T4hNA; } goto AxuII; ZdJW9: ZAKYo: goto grdhW; Jcbx2: $i = 0; goto uI1FB; SrgmB: T4hNA: goto JhHvD; HUUxb: $order = $pre . date("\x59\x6d\x64"); goto dSksY; AxuII: return false; goto SrgmB; ZjqSk: goto ycbx2; goto Q1Eji; ooI92: return generate_order(); goto R24UX; dSksY: $rand_length = $length - strlen($order); goto Jcbx2; kySxu: if (empty($result)) { goto OgeKi; } goto ooI92; eRRn9: if (!($i < $rand_length)) { goto aW0kb; } goto kgCHo; uI1FB: ycbx2: goto eRRn9; R24UX: OgeKi: goto FD4IA; Ygmdo: return $order; goto OtwAV; lNPI2: if (empty($table)) { goto CJ_UN; } goto AcmE4; kgCHo: $order .= mt_rand(0, 9); goto ZdJW9; OtwAV: } goto OJR3m; GQnXw: function riderBrokerageLog($person_id, $amount, $account = 0, $type = "\x72\x65\147", $status = 0, $object_id = 0) { goto LjncI; YZeYR: return false; goto jYm7A; Xo2z0: $setting = pdo_get("\x6d\x61\x6b\x65\x5f\163\x70\x65\145\x64\x5f\x73\x65\x74\x74\x69\x6e\x67", array("\x6b\x65\x79" => $per, "\x75\156\151\141\143\x69\x64" => $GLOBALS["\x75\156\x69\141\x63\151\x64"]), array("\166\x61\154\x75\145")); goto t5h3h; ybhVp: if (!(empty($set) || empty($set["\x72\151\144\145\x72\137" . $type]))) { goto aPRxZ; } goto tJraC; qQxm3: return true; goto pGiSt; t5h3h: $set = !empty($setting["\166\x61\154\165\145"]) ? unserialize($setting["\x76\141\x6c\x75\x65"]) : array(); goto ybhVp; cc6XU: aPRxZ: goto sndJZ; RG9J2: if (empty($add)) { goto gxEqu; } goto qQxm3; sndJZ: $data = array("\165\x73\145\x72\x5f\151\144" => $person_id, "\x61\x6d\x6f\x75\x6e\x74" => $amount, "\x74\171\160\145" => $type, "\163\164\x61\164\x75\163" => $status, "\157\142\x6a\145\x63\164\x5f\x69\144" => $object_id, "\141\x64\144\137\x74\x69\x6d\145" => time(), "\165\x70\x64\141\164\145\x5f\164\151\x6d\x65" => time()); goto lvvCp; LjncI: $per = !empty($account) ? "\x75\163\x65\x72\137\x69\156\166\151\x74\145" : "\x72\x69\x64\145\x72\x5f\151\x6e\x76\x69\164\x65"; goto Xo2z0; pGiSt: gxEqu: goto YZeYR; lvvCp: $add = pdo_insert("\x6d\x61\x6b\x65\137\x73\x70\x65\145\144\x5f\x72\x69\144\x65\x72\x5f\142\x72\157\153\x65\x72\x61\147\145", $data); goto RG9J2; tJraC: return false; goto cc6XU; jYm7A: } goto OmJ1I; oP32v: function rider_usercomplete_order($user_id) { goto GYAEC; STSpP: if (!empty($rider["\162\x65\143\x6f\155\x6d\x65\156\144\x5f\162\151\x64\x65\x72"])) { goto jnHJm; } goto bJoSv; NbMf1: jnHJm: goto fijp4; Fif5_: ybQIN: goto sDF59; qUBnJ: $invite = @array_combine($invite["\142\x75\x79\x5f\x74\x6f\164\141\154"], $invite["\x62\x75\171\x5f\x72\145\x77\141\x72\x64"]); goto lVHFS; lVHFS: if (!(empty($invite) || empty($rider_id))) { goto BIlCR; } goto vDV4B; viy8a: $add = pdo_insert("\x6d\x61\x6b\x65\x5f\x73\160\145\145\x64\x5f\x72\151\x64\145\162\x5f\x62\162\157\153\x65\162\141\x67\x65", $data); goto jzHjT; drOiv: $data = array("\141\143\x63\157\x75\x6e\164" => 0, "\165\163\145\x72\x5f\151\144" => $user_id, "\x72\x65\143\x6f\155\x6d\x65\x6e\144\137\x69\x64" => $rider_id, "\x74\x79\160\x65" => "\x75\x73\145\x72\137\143\157\155\x70\154\145\164\x65\137\x6f\x72\x64\x65\x72", "\141\x6d\x6f\165\x6e\x74" => sprintf("\45\56\62\146", $invite[$total["\143\157\165\156\x74"]]), "\x73\164\141\164\165\x73" => 2, "\141\144\144\137\164\151\x6d\145" => time(), "\x75\x6e\151\x61\x63\151\x64" => $GLOBALS["\165\x6e\151\141\143\151\x64"]); goto viy8a; fijp4: $rider_id = intval($rider["\162\145\143\x6f\x6d\x6d\x65\x6e\144\x5f\x72\x69\x64\145\x72"]); goto rP9o7; JxBPb: return false; goto yHH1t; bJoSv: return false; goto NbMf1; Zg_KC: $total = pdo_get("\x6d\141\x6b\145\x5f\x73\x70\x65\145\x64\x5f\x6f\x72\x64\145\x72", $where, array("\x43\x4f\125\116\x54\x28\x2a\51\40\101\123\40\x63\157\x75\156\164")); goto oQWiG; GYAEC: $rider = pdo_get("\155\x61\x6b\x65\x5f\163\x70\145\x65\x64\137\165\163\x65\162", array("\x69\x64" => $user_id), array("\x72\145\143\x6f\x6d\x6d\145\156\x64\137\162\x69\x64\x65\162")); goto STSpP; rP9o7: $invite = pdo_get("\155\141\153\x65\137\x73\160\145\x65\x64\x5f\163\145\164\x74\151\156\x67", array("\153\x65\x79" => "\165\x73\x65\162\x5f\151\156\x76\151\164\145", "\165\x6e\x69\141\x63\151\144" => $GLOBALS["\165\x6e\151\141\143\x69\144"]), array("\x76\141\x6c\x75\145")); goto wtWku; wtWku: $invite = !empty($invite["\166\141\x6c\x75\145"]) ? unserialize($invite["\x76\x61\154\x75\145"]) : array(); goto qUBnJ; yHH1t: VlKr6: goto drOiv; sDF59: $logData = array("\x74\x79\x70\145" => 3, "\x74\151\x74\154\x65" => "\xe9\x82\x80\350\xaf\267\347\224\xa8\346\210\xb7\345\256\x8c\346\210\x90\xe6\216\245\xe5\x8d\225\345\xa5\x96\xe5\x8a\xb1", "\x72\151\144\x65\x72\x5f\x69\x64" => $rider_id, "\141\155\x6f\x75\x6e\164" => $data["\141\x6d\x6f\x75\156\164"], "\163\x74\x61\164\165\x73" => 2, "\x61\x64\x64\x5f\x74\x69\x6d\x65" => time(), "\x75\156\151\x61\143\x69\144" => $GLOBALS["\165\156\x69\x61\x63\x69\144"]); goto dgN31; hW4I0: return false; goto Fif5_; jzHjT: if (!empty($add)) { goto ybQIN; } goto hW4I0; oQWiG: if (!empty($invite[$total["\143\x6f\x75\156\x74"]])) { goto VlKr6; } goto JxBPb; Nr6bL: $where = array("\165\156\151\141\x63\x69\144" => $GLOBALS["\x75\156\x69\x61\143\151\144"], "\x75\163\145\x72\x5f\x69\x64" => $user_id, "\x73\x74\x61\x74\x75\x73\x20\76\75" => 5); goto Zg_KC; s1Sq8: return true; goto LFp6D; dgN31: pdo_insert("\155\141\153\x65\x5f\163\160\x65\145\144\x5f\162\x69\x64\x65\x72\x5f\x63\x61\163\x68\x6c\x6f\x67", $logData); goto s1Sq8; vDV4B: return false; goto iXSnn; iXSnn: BIlCR: goto Nr6bL; LFp6D: } goto sbhuF; QkgwC: function getDistance($lat1, $lng1, $lat2, $lng2) { goto hSzIx; cW0F_: $radLat2 = deg2rad($lat2); goto v_Qai; lB3ba: $radLat1 = deg2rad($lat1); goto cW0F_; hSzIx: if (!(empty($lat1) || empty($lng1) || empty($lat2) || empty($lng2))) { goto ExIg7; } goto hQKff; uoPFw: return $s; goto qpscD; QIsB_: ExIg7: goto lB3ba; tp_83: $b = $radLng1 - $radLng2; goto TyarW; TyarW: $s = 2 * asin(sqrt(pow(sin($a / 2), 2) + cos($radLat1) * cos($radLat2) * pow(sin($b / 2), 2))) * 6378.137; goto uoPFw; WMvZ1: $radLng2 = deg2rad($lng2); goto EXwt7; EXwt7: $a = $radLat1 - $radLat2; goto tp_83; v_Qai: $radLng1 = deg2rad($lng1); goto WMvZ1; hQKff: return false; goto QIsB_; qpscD: } goto a3Qo5; F8B1z: function is_business_personnel($id) { goto bFTyL; nM811: if (!empty($business)) { goto U0iq0; } goto FSrZS; SOZnk: U0iq0: goto UpLpI; E0SIc: $business = pdo_get("\x6d\141\153\x65\x5f\x73\160\x65\145\144\x5f\x62\165\x73\151\x6e\x65\163\163\x5f\165\x73\x65\x72", $where, array("\x69\x64")); goto nM811; FSrZS: return false; goto SOZnk; bFTyL: $where = array("\x75\163\x65\162\137\x69\x64" => $GLOBALS["\x43\125\x52\x52\105\116\124\137\x55\123\x45\x52"], "\142\165\x73\x69\156\x65\x73\x73\x5f\x69\144" => intval($id)); goto E0SIc; UpLpI: return true; goto rrq0u; rrq0u: } goto TxP8r; eOcfI: function generateDataSign($data, $type = "\x6d\x64\x35", $certPath = '', $keyPath = '') { goto dtwn5; QRqTf: $sign = array(); goto G35Ds; vKrJs: $sign = strtoupper($sign); goto ogKAE; RwQsD: ksort($data); goto ROxRh; G35Ds: $type = strtoupper($type); goto RwQsD; toAW4: $mcd = array(); goto nS8Yc; dtwn5: $res = pdo_get("\x75\156\x69\137\163\x65\x74\x74\151\156\147\x73", array("\x75\156\151\x61\143\151\x64" => $GLOBALS["\x75\156\151\141\x63\151\x64"]), array("\160\x61\x79\x6d\145\x6e\x74")); goto toAW4; E8st2: file_put_contents($keyPath, authcode($mcd["\167\x65\143\150\x61\164\x5f\x72\x65\x66\x75\x6e\x64"]["\153\145\171"], "\104\105\103\x4f\x44\105")); goto HGbo4; OFZ18: $sign[] = "\x6b\145\171\x3d" . $mcd["\167\145\x63\x68\141\x74"]["\x73\151\x67\156\153\x65\x79"]; goto AJos_; ECrhi: MFVmI: goto frI5m; ZG9GU: RFLAr: goto OFZ18; zokAa: return error(1, "\xe6\x9c\xaa\351\205\215\xe7\xbd\xae\xe5\276\xae\xe4\277\xa1\xe6\224\xaf\344\xbb\x98\357\274\201"); goto P6ogm; P6ogm: W8BSQ: goto vplcv; nS8Yc: !empty($res) && !empty($res["\160\x61\171\x6d\x65\x6e\x74"]) && ($mcd = unserialize($res["\160\141\171\x6d\145\x6e\x74"])); goto NDTxd; ogKAE: return $sign; goto z3EdE; HGbo4: ik8Fv: goto QRqTf; AJos_: $sign = implode("\x26", $sign); goto sx5Dh; vplcv: if (!(empty($mcd["\167\x65\x63\150\141\164\x5f\162\145\x66\165\x6e\144"]["\x63\145\162\164"]) || empty($mcd["\167\145\143\150\x61\x74\137\162\145\146\x75\156\144"]["\153\145\171"]))) { goto MFVmI; } goto NWkyt; ROxRh: foreach ($data as $k => $v) { goto k4m70; N9419: YuADr: goto WuhsA; HIiMT: nmOq5: goto SSfSQ; k4m70: if (!($v === '' || $v === false || $v === null)) { goto YuADr; } goto M52sk; M52sk: goto nmOq5; goto N9419; WuhsA: $sign[] = $k . "\75" . $v; goto HIiMT; SSfSQ: } goto ZG9GU; frI5m: if (!(!empty($certPath) && !empty($keyPath))) { goto ik8Fv; } goto zZYLq; sx5Dh: $sign = $type == "\115\104\x35" ? md5($sign) : hash_hmac("\163\150\141\62\x35\x36", $sign, $mcd["\167\x65\143\150\141\x74"]["\x73\x69\x67\156\153\145\x79"]); goto vKrJs; NDTxd: if (!(empty($mcd) || empty($mcd["\167\145\143\x68\141\164"]["\x73\151\x67\156\153\x65\171"]))) { goto W8BSQ; } goto zokAa; NWkyt: return error(1, "\350\257\267\xe5\274\x80\xe5\x90\xaf\345\xbe\xae\344\xbf\241\351\x80\x80\346\xac\276\54\345\xb9\xb6\351\x85\215\xe7\275\xae\344\270\212\xe4\xbc\240\350\xaf\201\xe4\xb9\246\357\274\x81"); goto ECrhi; zZYLq: file_put_contents($certPath, authcode($mcd["\x77\145\143\x68\141\164\137\x72\145\x66\165\156\144"]["\143\145\x72\164"], "\104\105\x43\x4f\104\x45")); goto E8st2; z3EdE: } goto gYgnr; RlEA3: function setXMLData($data) { goto DpVdr; VQzHQ: return $result; goto p3I6d; Yactg: $result .= "\74\x2f\x78\x6d\154\x3e"; goto VQzHQ; DpVdr: if (is_array($data)) { goto gxDsU; } goto oYlup; Aj790: foreach ($data as $k => $v) { $result .= "\74" . $k . "\x3e\x3c\41\133\x43\x44\101\x54\101\133" . $v . "\x5d\135\76\74\57" . $k . "\76"; zS3Yu: } goto vQczj; vQczj: AhsFz: goto Yactg; hJBZj: $result = "\74\x78\155\x6c\x3e"; goto Aj790; oDt8J: gxDsU: goto hJBZj; oYlup: return ''; goto oDt8J; p3I6d: } goto pNqHt; OJR3m: if (!function_exists("\147\145\x6e\145\162\141\x74\x65\137\x72\141\x6e\x64\x6f\155\x5f\163\164\162")) { function generate_random_str($length = 6) { goto rksqX; HyhpD: $i = 0; goto E1luy; rksqX: $upper = "\101\x42\x43\x44\x45\106\x47\x48\111\x4a\113\x4c\x4d\116\x4f\120\x51\122\x53\x54\x55\126\127\130\131\132"; goto jRwH0; qbrv2: $str = ''; goto dvw8w; oX0jq: $i++; goto Hf5Uf; aiJu6: Fccyb: goto fsF5Y; ZegLc: $str .= substr($chars, rand(0, $strlen - 1), 1); goto niuQa; fsF5Y: return $str; goto AsG5m; mAE1s: $chars = $numeric . $upper; goto qbrv2; dvw8w: $strlen = strlen($chars); goto HyhpD; E1luy: qSBCp: goto Otdxo; jRwH0: $numeric = "\60\x31\x32\63\64\65\x36\67\70\71"; goto mAE1s; niuQa: V8C8g: goto oX0jq; Hf5Uf: goto qSBCp; goto aiJu6; Otdxo: if (!($i < $length)) { goto Fccyb; } goto ZegLc; AsG5m: } } goto uHeot; j54So: function is_exists_modules($name) { goto dBoOE; z0sBv: return true; goto FlmKt; i_1lN: if (!empty($result)) { goto NhZkz; } goto ASsfu; qcej9: NhZkz: goto z0sBv; dBoOE: $result = pdo_get("\x6d\x6f\144\x75\154\x65\x73", array("\156\141\155\x65" => $name), array("\x6d\x69\144")); goto i_1lN; ASsfu: return false; goto qcej9; FlmKt: } goto k9thU; EbX_N: function get_rider_status($rider_id = 0) { goto Kj5uF; vIVYP: return false; goto wMrPP; eAqpS: $rider = pdo_get("\x6d\141\153\x65\137\163\x70\x65\145\144\137\x72\151\144\145\162", array("\151\x64" => $rider_id), array("\163\x74\141\x74\165\163")); goto abTTf; wMrPP: SSdON: goto Us_Ed; abTTf: if (!(empty($rider["\x73\x74\x61\x74\x75\163"]) || $rider["\163\x74\141\x74\165\163"] < 2)) { goto SSdON; } goto vIVYP; Kj5uF: empty($rider_id) && ($rider_id = intval($GLOBALS["\x43\125\x52\122\105\116\x54\x5f\x52\x49\104\x45\122"])); goto eAqpS; Us_Ed: return true; goto KqTEc; KqTEc: } goto ngjTd; wgDSi: function get_access_token($appid = '', $secret = '') { goto haDXo; Laii3: $tokenUrl = "\x68\x74\164\160\163\x3a\57\x2f\x61\160\151\x2e\167\145\x69\x78\x69\x6e\56\x71\x71\x2e\x63\157\x6d\57\143\147\151\55\142\151\156\x2f\164\x6f\x6b\x65\x6e\77\147\162\x61\156\164\137\164\171\x70\x65\75\x63\x6c\x69\x65\x6e\164\x5f\143\x72\x65\x64\145\x6e\x74\x69\x61\x6c\x26\141\x70\160\151\144\75" . $appid . "\x26\163\x65\143\162\145\x74\75" . $secret; goto a0ONc; a0ONc: $html = file_get_contents($tokenUrl); goto KVVJX; KVVJX: $arr = json_decode($html, true); goto m9v7x; lqJKJ: $appid = !empty($appid) ? $appid : $_W["\x61\x63\x63\157\x75\x6e\x74"]["\153\145\171"]; goto J3Ng3; m9v7x: return $arr["\141\143\x63\145\163\163\137\164\157\153\145\156"]; goto fh6oU; J3Ng3: $secret = !empty($secret) ? $secret : $_W["\141\143\143\x6f\165\156\x74"]["\163\145\143\162\145\164"]; goto Laii3; haDXo: global $_W; goto lqJKJ; fh6oU: } goto q3tHJ; gYgnr: function setRequest($url, $post = false, $ssl = true, $certPath = '', $keyPath = '') { goto xxezS; fdkR1: aI1hX: goto aQL0b; aQL0b: if (!is_file($keyPath)) { goto GVwfl; } goto mX4Y1; Tb34c: if (!$post) { goto viHa9; } goto mypGf; G3Syk: viHa9: goto h5J3h; MWDAh: curl_setopt($ch, CURLOPT_SSLCERT, $certPath); goto fdkR1; HOU1S: curl_close($ch); goto wi7Ei; ElfCk: $ch = curl_init(); goto r0_X6; xxezS: $result = ''; goto EDawn; mX4Y1: curl_setopt($ch, CURLOPT_SSLKEY, $keyPath); goto EFIZZ; lixSe: $result = curl_exec($ch); goto HOU1S; h5J3h: if (!$ssl) { goto v7blj; } goto ViIDz; yamY2: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5); goto Tb34c; AQ4Qv: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto G3Syk; syTR1: curl_setopt($ch, CURLOPT_TIMEOUT, 30); goto bZB9t; GScj0: v7blj: goto lixSe; mypGf: curl_setopt($ch, CURLOPT_POST, true); goto AQ4Qv; ViIDz: if (!is_file($certPath)) { goto aI1hX; } goto MWDAh; w8FyN: curl_setopt($ch, CURLOPT_HEADER, false); goto syTR1; PMm1Y: curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); goto r7_vh; r7_vh: curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); goto yamY2; EFIZZ: GVwfl: goto GScj0; wi7Ei: return $result; goto QNgXK; EDawn: if (!function_exists("\x63\165\162\x6c\x5f\x69\x6e\151\x74")) { return ''; } goto ElfCk; bZB9t: curl_setopt($ch, CURLOPT_MAXREDIRS, 5); goto PMm1Y; r0_X6: curl_setopt($ch, CURLOPT_URL, $url); goto w8FyN; QNgXK: } goto RlEA3; JYYJ7: function get_point_distance($from, $to) { goto pgviP; nIIQ1: if (!(empty($result) || $result["\163\x74\141\x74\165\x73"] !== 0 || empty($result["\162\x65\x73\x75\x6c\x74"]["\x65\154\x65\155\145\156\164\163"]))) { goto MJ2UJ; } goto r53VN; jb8gq: $result = json_decode($result["\x63\x6f\156\x74\145\x6e\164"], true); goto nIIQ1; CA2u4: $url .= "\46\x66\x72\157\155\x3d" . $from . "\x26\164\157\75" . $to; goto XGGxs; XGGxs: $result = ihttp_request($url); goto jb8gq; pgviP: $settign = pdo_get("\155\141\x6b\145\x5f\x73\x70\x65\145\x64\x5f\163\x65\x74\164\x69\156\147", array("\x75\156\151\x61\x63\151\144" => $GLOBALS["\x75\x6e\x69\141\143\x69\144"], "\x6b\145\171" => "\x74\145\x6e\143\x65\x6e\x74\x5f\x6b\x65\171"), array("\x76\141\154\x75\145")); goto P88A1; KhoRF: return $result["\x72\145\x73\x75\154\x74"]["\x65\x6c\145\155\x65\x6e\x74\x73"]; goto L5QcY; MKLyq: MJ2UJ: goto KhoRF; P88A1: $key = !empty($setting["\166\141\x6c\165\145"]) ? $setting["\x76\141\154\165\x65"] : "\131\x34\x53\102\132\55\130\107\x37\66\x57\55\105\115\117\122\x4f\55\x52\x46\112\66\x48\x2d\112\x32\127\x4e\126\x2d\x4f\x4e\x42\x4b\123"; goto fepYl; r53VN: return false; goto MKLyq; fepYl: $url = "\x68\x74\x74\x70\163\72\x2f\x2f\141\160\x69\163\x2e\155\x61\x70\56\x71\x71\x2e\x63\157\155\x2f\x77\x73\x2f\x64\x69\163\x74\141\156\143\145\x2f\166\61\57\77\155\157\x64\145\x3d\x64\x72\151\x76\151\x6e\x67\46\153\x65\x79\75" . $key; goto CA2u4; L5QcY: } goto OFE0I; hdeLs: function get_business_rider($business_id = 0) { goto J9iWT; s7dQ3: $business = pdo_get("\155\141\x6b\145\137\x73\160\145\145\x64\137\142\165\163\x69\156\145\x73\163\x5f\151\x6e\146\x6f", array("\142\165\x73\x69\156\x65\x73\163\x5f\x69\144" => intval($business_id)), array("\162\151\x64\145\162\137\151\144")); goto gbsBy; ATAU5: Pcaf6: goto rr1tl; J9iWT: if (pdo_tableexists("\x6d\x61\x6b\x65\137\163\x70\x65\x65\144\x5f\x62\165\x73\151\156\x65\x73\163\x5f\151\156\146\x6f")) { goto PrSmZ; } goto HWps7; gbsBy: if (!(empty($business) || empty($business["\x72\x69\x64\145\162\137\151\144"]))) { goto Pcaf6; } goto wGaYa; wGaYa: return ''; goto ATAU5; qFCPU: PrSmZ: goto s7dQ3; rr1tl: return $business["\x72\151\144\x65\x72\137\151\144"] . "\x7c"; goto TYtH4; HWps7: return ''; goto qFCPU; TYtH4: } goto xH9qR; G1VqY: function rider_complete_order($rider_id) { goto dhsSc; dhsSc: $invite = pdo_get("\155\x61\x6b\145\x5f\163\x70\x65\x65\x64\x5f\x73\x65\x74\x74\x69\156\147", array("\x6b\x65\171" => "\162\x69\144\145\x72\137\151\156\x76\151\x74\145", "\x75\156\x69\x61\143\151\x64" => $GLOBALS["\165\156\151\x61\x63\151\x64"]), array("\166\141\154\165\145")); goto mVlfL; sRgMv: $invite = @array_combine($invite["\x62\x75\171\x5f\x74\x6f\164\x61\x6c"], $invite["\x62\x75\171\x5f\x72\145\x77\x61\162\x64"]); goto mTyMD; noXiO: pdo_insert("\x6d\141\x6b\145\137\x73\x70\x65\145\144\x5f\x72\151\144\x65\x72\x5f\x63\141\x73\x68\x6c\x6f\x67", $logData); goto ZZUuf; dQ01H: $logData = array("\x74\x79\x70\x65" => 3, "\x74\151\x74\154\145" => "\xe9\202\200\350\xaf\267\345\245\275\xe5\x8f\213\345\xae\214\346\x88\220\xe6\x8e\245\345\215\x95\345\xa5\226\xe5\212\261", "\x72\151\x64\145\162\137\x69\144" => $recom["\x72\x65\143\157\155\x6d\x65\156\144\x5f\x69\x64"], "\141\155\x6f\165\156\164" => $data["\x61\155\157\x75\x6e\164"], "\163\x74\x61\x74\x75\x73" => 2, "\141\144\144\x5f\164\x69\x6d\145" => time(), "\x75\x6e\151\141\x63\x69\x64" => $GLOBALS["\x75\156\x69\141\x63\x69\144"]); goto noXiO; ArgFx: $total = pdo_get("\x6d\141\153\x65\x5f\x73\160\145\145\x64\137\157\x72\x64\145\162\x5f\162\x69\144\x65\x72", array("\162\x69\144\x65\162\137\x69\144" => $rider_id, "\147\157\x74\x6f\137\x74\x69\155\x65\40\x3e" => 0), array("\103\x4f\125\116\124\50\52\x29\x20\101\123\x20\x63\157\x75\x6e\x74")); goto nlzGw; u4HzS: XISy5: goto sRgMv; BuZhl: $recom = pdo_get("\x6d\141\153\145\137\x73\160\x65\145\144\137\x72\x69\x64\145\x72", array("\151\144" => intval($rider_id)), array("\x72\145\x63\157\x6d\155\145\x6e\144\x5f\151\144")); goto Ar0id; mTyMD: if (!empty($invite)) { goto Dvxk4; } goto o0crV; sMDxq: return false; goto Mm9Ab; Nx3wX: mfIwB: goto HBl1d; Ar0id: if (!(empty($invite) || empty($recom["\162\145\143\x6f\155\155\x65\x6e\144\137\151\144"]) || empty($invite["\142\165\171\137\x74\x6f\164\x61\x6c"]) || empty($invite["\x62\x75\x79\137\x72\145\167\x61\x72\x64"]))) { goto XISy5; } goto advI2; mVlfL: $invite = !empty($invite["\x76\x61\154\165\145"]) ? unserialize($invite["\166\141\154\x75\x65"]) : array(); goto BuZhl; o0crV: return false; goto CNPQX; HBl1d: $data = array("\x61\x63\x63\x6f\x75\156\x74" => 1, "\x75\163\145\x72\x5f\151\144" => $rider_id, "\x72\x65\143\157\155\x6d\x65\156\144\137\x69\144" => $recom["\162\x65\143\157\155\155\145\x6e\x64\x5f\151\x64"], "\x74\171\160\x65" => "\143\x6f\x6d\160\154\145\x74\145\x5f\157\162\144\x65\x72", "\141\155\157\165\x6e\164" => sprintf("\45\56\x32\146", $invite[$total["\x63\157\165\x6e\x74"]]), "\163\164\x61\x74\165\x73" => 2, "\x61\x64\x64\x5f\x74\151\x6d\145" => time(), "\165\x6e\151\x61\143\x69\144" => $GLOBALS["\x75\156\151\x61\143\x69\144"]); goto IUzKA; advI2: return false; goto u4HzS; IUzKA: $add = pdo_insert("\155\141\x6b\145\x5f\163\x70\145\x65\x64\137\x72\151\144\145\162\x5f\x62\162\157\153\145\x72\x61\x67\145", $data); goto ZMyrO; CNPQX: Dvxk4: goto ArgFx; nlzGw: if (!empty($invite[$total["\x63\157\x75\x6e\164"]])) { goto mfIwB; } goto OIe9V; ZMyrO: if (!empty($add)) { goto N8PDo; } goto sMDxq; OIe9V: return false; goto Nx3wX; Mm9Ab: N8PDo: goto dQ01H; ZZUuf: return true; goto vRaeU; vRaeU: } goto oP32v; wPeKy: function get_oneorder_coupon($user_id) { goto n2f1t; BVe8g: if (!($invite["\x66\x69\x72\x73\x74\x5f\x6c\151\x6d\x69\x74"] <= $coupon["\143\x6f\165\156\x74"])) { goto Ye_S6; } goto pS1Go; n2f1t: $ordercount = pdo_get("\155\x61\x6b\x65\x5f\x73\x70\x65\145\144\x5f\157\x72\x64\x65\162", array("\165\163\x65\x72\x5f\x69\144" => $user_id, "\165\x6e\x69\141\143\x69\x64" => $GLOBALS["\165\x6e\x69\141\x63\x69\x64"], "\163\x74\x61\x74\165\163\40\x3e\x3d" => 5), array("\103\117\x55\116\124\50\52\51\40\x61\163\40\x63\157\x75\156\164")); goto sgpOh; Mqfej: URu6g: goto A1YlR; A1YlR: $coupon = pdo_get("\x6d\x61\153\145\137\x73\160\x65\145\x64\137\165\x73\145\162\137\x63\157\165\160\x6f\x6e\163", array("\x74\171\160\x65" => "\x6f\156\x65\157\162\144\145\162", "\x75\x73\x65\x72\x5f\151\144" => $user["\x72\145\x63\157\x6d\x6d\x65\x6e\144\137\151\144"], "\165\x6e\x69\141\143\151\x64" => $GLOBALS["\x75\x6e\x69\141\x63\x69\x64"]), array("\x43\x4f\125\x4e\124\x28\52\x29\40\141\163\x20\143\157\165\156\x74")); goto BVe8g; pS1Go: return false; goto GdHky; BRwvu: $begin_time = time(); goto WhhJ8; VXcfZ: ghCTw: goto Ij7Yq; GdHky: Ye_S6: goto BRwvu; lZTo5: $add = pdo_insert("\155\141\x6b\145\137\x73\160\x65\x65\144\137\165\x73\x65\x72\x5f\143\x6f\165\160\157\156\x73", $couponData); goto nCEbC; nCEbC: if (!empty($add)) { goto ghCTw; } goto wR0av; DpSrn: return false; goto ZhtWz; Ij7Yq: return true; goto VCUYk; eYjSh: if (!empty($invite)) { goto URu6g; } goto bmL3p; wR0av: return false; goto VXcfZ; sgpOh: if (!(intval($ordercount["\143\x6f\165\x6e\164"]) !== 1)) { goto xfCxc; } goto sItVd; o3Zt4: xfCxc: goto BsLpP; VmImc: $couponData = array("\x74\171\x70\145" => "\157\x6e\x65\x6f\162\144\145\162", "\141\155\157\x75\156\x74" => $invite["\x66\x69\x72\163\164"], "\146\x75\x6c\x6c\x5f\x61\x6d\157\x75\x6e\164" => $invite["\x66\x69\x72\163\x74\x5f\146\165\x6c\x6c"], "\164\x69\160\163" => "\345\245\xbd\xe5\x8f\213\345\xae\214\346\210\220\351\246\x96\345\215\x95\345\245\x96\345\x8a\261\xe4\xbc\x98\xe6\x83\xa0\345\210\270", "\x75\163\145\x72\x5f\151\x64" => $user["\162\x65\x63\157\x6d\155\x65\x6e\144\137\151\144"], "\165\156\151\x61\143\151\x64" => $GLOBALS["\x75\x6e\151\141\143\x69\144"], "\142\x65\x67\x69\156\137\164\151\x6d\x65" => $begin_time, "\145\x78\x70\x69\162\x65\x5f\164\151\155\145" => $end_time, "\x61\144\x64\x5f\164\151\155\x65" => $begin_time); goto lZTo5; ZhtWz: rYr3S: goto k9Ato; bmL3p: return false; goto Mqfej; bS9ud: $invite = !empty($invite["\x76\141\154\x75\145"]) ? unserialize($invite["\x76\x61\154\165\145"]) : array(); goto eYjSh; WhhJ8: $end_time = strtotime("\x2b" . $invite["\x66\151\x72\x73\164\x5f\144\141\x79"] . "\x20\x64\141\171"); goto VmImc; BsLpP: $user = pdo_get("\155\141\x6b\145\137\163\x70\x65\x65\x64\137\165\163\145\162", array("\151\x64" => $user_id), array("\162\x65\143\157\155\x6d\145\156\144\137\151\144")); goto e2Kl_; sItVd: return false; goto o3Zt4; e2Kl_: if (!empty($user["\162\145\x63\157\x6d\155\145\156\144\x5f\151\x64"])) { goto rYr3S; } goto DpSrn; k9Ato: $invite = pdo_get("\155\141\x6b\145\137\x73\x70\x65\145\144\137\x73\145\x74\164\x69\156\x67", array("\x6b\145\171" => "\x75\163\145\162\163\137\151\x6e\x76\151\164\145", "\x75\156\151\141\x63\151\144" => $GLOBALS["\165\x6e\151\x61\143\x69\x64"]), array("\166\x61\x6c\165\145")); goto bS9ud; VCUYk: } goto MNapK; q3tHJ: function get_invite_coupon($recommend_id) { goto pzfka; fLI8K: if (!empty($invite)) { goto eHOfO; } goto hT3De; FNwfI: qMWF9: goto cmgXP; h12W1: oq_rP: goto tquwO; tquwO: $begin_time = time(); goto OEiaV; OWAsg: if (!($num < $invite["\x70\145\162\163\157\156\x5f\x6e\165\x6d"])) { goto oq_rP; } goto IZ8Tw; yJ_fy: return false; goto FNwfI; SgLA7: $add = pdo_insert("\155\x61\153\145\137\x73\160\145\145\x64\137\x75\x73\x65\x72\x5f\x63\157\x75\x70\x6f\x6e\163", $couponData); goto WGCnB; cmgXP: $invite = pdo_get("\155\141\x6b\145\x5f\x73\160\x65\145\x64\x5f\163\x65\164\164\x69\x6e\147", array("\153\x65\x79" => "\x75\163\x65\x72\x73\137\151\156\x76\x69\164\145", "\x75\x6e\x69\141\x63\151\144" => $GLOBALS["\165\156\x69\x61\x63\151\x64"]), array("\x76\141\x6c\165\x65")); goto l9QLl; No6wI: AXPzK: goto cfBF5; HphWg: $couponData = array("\x74\171\x70\x65" => "\x69\x6e\166\151\164\x65", "\x61\x6d\157\x75\x6e\164" => $invite["\160\145\162\163\x6f\156\137\160\162\x69\143\x65"], "\146\165\x6c\154\137\141\x6d\x6f\x75\x6e\x74" => $invite["\x70\x65\162\x73\x6f\x6e\x5f\x66\x75\154\154"], "\164\151\x70\163" => "\xe6\216\250\xe8\x8d\220\345\xa5\xbd\345\x8f\x8b\xe5\xa5\226\345\x8a\xb1\xe4\274\x98\346\203\240\xe5\210\xb8", "\x75\163\x65\162\137\151\144" => $recommend_id, "\x75\156\x69\141\x63\x69\144" => $GLOBALS["\x75\156\x69\141\143\151\144"], "\142\145\147\x69\156\x5f\x74\151\x6d\x65" => $begin_time, "\145\x78\160\151\162\145\x5f\164\x69\155\x65" => $end_time, "\x61\x64\144\137\164\151\x6d\x65" => $begin_time); goto SgLA7; t7ASh: eHOfO: goto Q2OJE; pzfka: if (!empty($recommend_id)) { goto qMWF9; } goto yJ_fy; l9QLl: $invite = !empty($invite["\166\141\154\x75\145"]) ? unserialize($invite["\166\141\154\165\x65"]) : array(); goto fLI8K; s8r4z: $user = pdo_get("\155\141\153\x65\x5f\163\x70\145\x65\144\137\165\x73\145\x72", array("\162\x65\143\x6f\155\155\x65\156\144\x5f\x69\144" => $recommend_id, "\165\x6e\151\x61\143\x69\x64" => $GLOBALS["\165\x6e\x69\x61\143\x69\x64"]), array("\x43\117\125\116\x54\50\52\x29\40\x61\163\x20\143\x6f\x75\156\164")); goto vZiyF; cfBF5: return true; goto xZhEz; hT3De: return false; goto t7ASh; o3tS9: if (!($invite["\x70\145\x72\x73\x6f\x6e\137\x6c\151\x6d\x69\x74"] <= $coupon["\143\x6f\x75\156\164"])) { goto BXY55; } goto Wf2qe; WGCnB: if (!empty($add)) { goto AXPzK; } goto ECCq7; ECCq7: return false; goto No6wI; Wf2qe: return false; goto tP9Zm; Q2OJE: $coupon = pdo_get("\155\141\x6b\145\137\x73\x70\145\x65\144\137\x75\163\x65\x72\137\143\x6f\165\x70\x6f\156\x73", array("\x74\x79\x70\x65" => "\x69\x6e\x76\x69\x74\145", "\x75\x73\x65\162\137\151\144" => $recommend_id, "\165\156\x69\141\x63\151\144" => $GLOBALS["\x75\x6e\151\141\143\x69\144"]), array("\x43\x4f\125\x4e\124\50\52\x29\x20\x61\x73\x20\143\x6f\x75\156\x74")); goto o3tS9; IZ8Tw: return false; goto h12W1; OEiaV: $end_time = strtotime("\53" . $invite["\160\x65\162\x73\x6f\x6e\x5f\144\141\171"] . "\x20\144\x61\x79"); goto HphWg; tP9Zm: BXY55: goto s8r4z; vZiyF: $num = $user["\x63\157\x75\x6e\x74"] - $coupon["\x63\157\x75\156\164"] * $invite["\x70\x65\162\163\x6f\156\x5f\x6e\165\155"]; goto OWAsg; xZhEz: } goto wPeKy; NF1EI: function isopen_business($type_id) { goto LQxDW; Ctwg_: S2flM: goto lZynF; tjUnR: if (!(empty($setting) || count($setting) != 4)) { goto vAVRP; } goto HOQS_; HOQS_: $setting = array(array("\x74\x79\x70\x65" => 0, "\163\x74\x61\164\x75\x73" => true, "\164\x69\x74\x6c\145" => "\xe5\270\xae\xe6\x88\x91\xe9\x80\201", "\x73\x6f\162\x74" => 3), array("\164\x79\x70\145" => 1, "\163\x74\141\164\x75\163" => true, "\x74\151\x74\x6c\145" => "\345\xb8\xae\xe6\210\x91\xe4\xb9\xb0", "\x73\x6f\162\x74" => 0), array("\164\x79\x70\145" => 2, "\163\164\x61\x74\165\163" => true, "\x74\151\x74\154\x65" => "\xe4\xb8\207\xe8\203\275\346\x9c\215\345\x8a\xa1", "\x73\x6f\x72\x74" => 0), array("\x74\171\x70\145" => 3, "\x73\164\x61\x74\x75\163" => true, "\x74\151\164\154\x65" => "\xe5\xb8\xae\346\x88\221\344\xbb\xa3\351\xa9\xbe", "\x73\157\x72\164" => 0), array("\164\x79\x70\145" => 4, "\x73\164\x61\164\x75\163" => true, "\x74\151\x74\x6c\x65" => "\xe8\xb4\xa7\350\277\220", "\x73\157\x72\x74" => 0), array("\x74\171\x70\145" => 6, "\163\x74\141\164\x75\163" => true, "\164\x69\x74\154\x65" => "\345\256\266\346\224\xbf", "\163\157\162\164" => 0)); goto bMlWa; JhAxv: $results = array_combine(array_column($setting, "\x74\171\160\x65"), array_column($setting, "\x73\164\x61\x74\165\x73")); goto f0LHC; bMlWa: vAVRP: goto JhAxv; f0LHC: if (!(empty($results) || empty($results[$type_id]))) { goto S2flM; } goto iyeNJ; lZynF: return true; goto g5Mzf; HEbN7: $setting = !empty($setting["\166\141\154\165\145"]) ? @unserialize($setting["\x76\141\154\165\x65"]) : array(); goto tjUnR; iyeNJ: return false; goto Ctwg_; LQxDW: $setting = pdo_get("\x6d\x61\153\145\137\x73\x70\x65\x65\x64\137\163\145\x74\x74\x69\156\x67", array("\x6b\145\x79" => "\x6f\160\145\156\x5f\x62\165\x73\x69\156\x65\x73\163", "\x75\156\151\141\x63\x69\x64" => $GLOBALS["\165\156\151\141\143\151\144"]), array("\x76\x61\154\165\x65")); goto HEbN7; g5Mzf: } goto j54So; qo4r2: function addUserMessage($user_id, $title, $summary) { goto qr2ah; qr2ah: $data = array("\164\171\160\x65" => 1, "\x74\x69\164\154\145" => !empty($title) ? $title : '', "\x75\163\x65\x72\137\151\144" => intval($user_id), "\163\x75\x6d\x6d\141\x72\171" => $summary, "\141\x64\x64\x5f\164\x69\155\x65" => time(), "\165\156\151\x61\x63\151\144" => !empty($GLOBALS["\x75\156\x69\x61\143\151\144"]) ? $GLOBALS["\165\x6e\x69\141\x63\151\x64"] : 0); goto gqnqR; gqnqR: $add = pdo_insert("\155\141\153\x65\137\163\160\x65\x65\x64\x5f\165\163\x65\162\x5f\155\145\x73\x73\x61\147\x65", $data); goto KgngR; KgngR: return $add; goto U856g; U856g: } goto VaRRL; a3Qo5: function addCashLog($user_id, $order_code, $amount, $type = 0, $title = '', $object_id = 0, $status = 1, $business_id = 0) { goto VD3C5; Qz1tF: if (empty($add)) { goto UBGPL; } goto UXyTc; RCwGT: return 0; goto ZcbFr; VD3C5: $data = array("\x62\x75\163\151\x6e\145\x73\163\x5f\151\144" => $business_id, "\x74\151\x74\154\145" => !empty($title) ? $title : '', "\x75\x73\145\x72\x5f\x69\144" => intval($user_id), "\x6f\142\152\x65\x63\x74\137\x69\x64" => $object_id, "\157\x72\x64\x65\x72\137\x63\157\144\145" => $order_code, "\x61\155\x6f\x75\156\164" => sprintf("\45\x2e\x32\x66", $amount), "\164\x79\160\x65" => intval($type), "\x73\x74\x61\x74\x75\163" => $status, "\141\x64\144\x5f\x74\151\155\x65" => time(), "\x75\x6e\x69\141\x63\x69\144" => !empty($GLOBALS["\165\156\151\x61\x63\151\x64"]) ? $GLOBALS["\x75\x6e\x69\x61\143\151\144"] : 0); goto n2Edj; ii6cC: UBGPL: goto RCwGT; UXyTc: return pdo_insertid(); goto ii6cC; n2Edj: $data["\164\x69\164\154\x65"] == '' && ($data["\x74\151\x74\154\x65"] = $type == 2 ? "\xe5\x85\205\xe5\200\xbc" : "\346\224\xaf\344\xbb\230"); goto A6_tn; A6_tn: $add = pdo_insert("\155\x61\153\x65\137\x73\160\145\x65\x64\137\165\x73\x65\x72\x5f\x63\141\163\x68\x6c\x6f\x67", $data); goto Qz1tF; ZcbFr: } goto qo4r2; uGOx7: function is_mobile($str) { goto WDVhc; kWA0X: return preg_match('' . "\57\x5e\x28" . "\50\50\61\x33\50\x5b\x30\55\x39\135\173\61\x7d\x29\x7c\61\64\50\133\65\67\71\135\51\174\61\65\x28\133\x30\61\62\x33\65\x36\x37\x38\x39\x5d\x29\x7c\x31\x36\x28\x5b\66\135\x29\174\x31\67\x28\x5b\60\61\63\65\66\67\x38\135\x29\x7c\x31\70\x28\x5b\x30\x2d\x39\135\173\61\175\51\x7c\61\x39\50\133\61\70\x39\x5d\x29\51" . "\x28\x5b\60\55\71\x5d\173\x38\175\51\x29\174\50\50\x31\67\60\x28\133\x30\x35\x39\135\x29\x29\50\x5b\60\x2d\71\x5d\173\67\x7d\x29\x29" . "\x29\44\57", $str) ? true : false; goto mj2kH; WDVhc: if (is_scalar($str)) { goto r2YZA; } goto lE6E2; lE6E2: return false; goto sEHMT; sEHMT: r2YZA: goto kWA0X; mj2kH: } goto oSbx8; oSbx8: if (!function_exists("\x69\x73\x5f\x69\144\x5f\156\x75\155\142\145\x72")) { function is_id_number($str) { goto OKrmU; WvQig: return false; goto Pqt8L; v_fSE: return false; goto bbhla; xLB8i: $basecode = substr($str, 0, 17); goto g34W4; OKrmU: if (is_scalar($str)) { goto Iw2yK; } goto nOxdi; Imz4C: IH1OQ: goto kzrKM; bdE7T: unset($birthday, $checkday); goto xQ1Gv; TA30v: D1iDR: goto r4PpH; XYKgY: if (strlen($str) == 15) { goto D1iDR; } goto Kn7Uh; O0kEy: $i = 0; goto F8_6T; LFttJ: goto U5hSN; goto TA30v; sfEKm: $checksum += (int) $basecode[$i] * $factor[$i]; goto vXOK8; Pqt8L: LNV9I: goto tVLtz; ybdW6: q__2K: goto bdE7T; tVLtz: if (array_key_exists(intval(substr($str, 0, 2)), array(11 => "\345\214\227\xe4\272\xac", 12 => "\xe5\244\xa9\xe6\264\xa5", 13 => "\346\xb2\263\345\x8c\227", 14 => "\345\xb1\xb1\350\xa5\277", 15 => "\345\206\x85\350\222\x99\345\x8f\xa4", 21 => "\350\276\xbd\xe5\xae\x81", 22 => "\345\220\x89\346\x9e\227", 23 => "\351\273\x91\351\xbe\231\xe6\261\x9f", 31 => "\xe4\xb8\x8a\346\265\267", 32 => "\346\xb1\x9f\350\x8b\217", 33 => "\xe6\xb5\x99\346\261\237", 34 => "\345\256\211\xe5\276\275", 35 => "\xe7\xa6\x8f\345\273\xba", 36 => "\346\261\x9f\xe8\xa5\277", 37 => "\345\xb1\261\344\270\234", 41 => "\346\xb2\xb3\345\215\x97", 42 => "\346\xb9\226\345\x8c\x97", 43 => "\xe6\xb9\226\xe5\x8d\227", 44 => "\xe5\xb9\277\344\270\x9c", 45 => "\xe5\271\xbf\350\xa5\277", 46 => "\xe6\xb5\xb7\xe5\x8d\x97", 50 => "\351\207\215\xe5\272\x86", 51 => "\xe5\x9b\x9b\xe5\xb7\235", 52 => "\350\xb4\265\xe5\267\x9e", 53 => "\xe4\272\221\xe5\215\227", 54 => "\350\245\277\xe8\x97\x8f", 61 => "\xe9\231\225\xe8\245\277", 62 => "\xe7\224\x98\350\x82\x83", 63 => "\351\235\222\346\xb5\xb7", 64 => "\xe5\xae\201\xe5\244\x8f", 65 => "\xe6\x96\260\xe7\226\x86", 71 => "\xe5\217\xb0\xe6\xb9\276", 81 => "\351\246\x99\346\xb8\xaf", 82 => "\346\276\xb3\351\x97\250", 91 => "\345\233\xbd\xe5\xa4\226"))) { goto KFw1M; } goto Hikph; Kn7Uh: $birthday = substr($str, 6, 4) . "\55" . substr($str, 10, 2) . "\55" . substr($str, 12, 2); goto LFttJ; O6lJs: U5hSN: goto vLNJD; Xhvrv: if (!(!isset($verify[$mod]) || strtoupper($verifycode) != $verify[$mod])) { goto SNXdG; } goto v_fSE; ItBUr: QFn3L: goto k8I8_; vLNJD: $checkday = date_create($birthday); goto JuL3P; F8_6T: Vi3VN: goto rrNX2; ZsqVm: $i++; goto WyuSs; rrNX2: if (!($i < 17)) { goto QFn3L; } goto sfEKm; xQ1Gv: if (!(strlen($str) == 18)) { goto IH1OQ; } goto xLB8i; Xyaij: if (!(!preg_match("\x2f\136\50\133\60\55\x39\x5d\173\x31\x37\x7d\x29\50\x5b\60\55\x39\135\x7c\x5b\x78\135\51\44\x2f\151", $str) && !preg_match("\57\136\133\x30\x2d\71\x5d\x7b\x31\65\175\44\57\151", $str))) { goto LNV9I; } goto WvQig; JuL3P: if (!(!$checkday || date_format($checkday, "\131\x2d\x6d\x2d\x64") !== $birthday)) { goto q__2K; } goto YskLW; dSiRk: KFw1M: goto XYKgY; Gdv4l: $checksum = 0; goto O0kEy; r4PpH: $birthday = "\61\x39" . substr($str, 6, 2) . "\x2d" . substr($str, 8, 2) . "\55" . substr($str, 10, 2); goto O6lJs; kzrKM: return true; goto dL9Rm; k8I8_: $mod = $checksum % 11; goto Xhvrv; IyPis: $verify = array("\61", "\x30", "\130", "\x39", "\x38", "\x37", "\x36", "\65", "\64", "\x33", "\x32"); goto Gdv4l; nOxdi: return false; goto nhCnL; g34W4: $verifycode = substr($str, -1); goto szBoN; szBoN: $factor = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); goto IyPis; bbhla: SNXdG: goto Imz4C; nhCnL: Iw2yK: goto NvrAG; WyuSs: goto Vi3VN; goto ItBUr; vXOK8: j9dyG: goto ZsqVm; Hikph: return false; goto dSiRk; NvrAG: $str = (string) $str; goto Xyaij; YskLW: return false; goto ybdW6; dL9Rm: } } goto SVIBA; sbhuF: function setRedisTask($order_id, $time = 120, $token = '') { goto Wyxyj; yxDiK: logging_run(date("\131\55\x6d\55\x64\x20\x48\72\151") . "\x5b\122\145\144\151\x73\40\x73\x65\x6e\x64\x54\145\155\x70\154\141\x74\145\135\40\x45\162\162\157\x72\72\x20" . $key, "\164\x72\x61\x63\x65", "\x6d\141\153\145\x73\160\145\145\144\x6c\x6f\x67"); goto BlGJp; Wyxyj: $value = "\x53\x65\156\x64\115\x65\x73\163\141\x67\145"; goto jM7jY; l_EAQ: require_once dirname(__FILE__) . "\57\154\151\x62\57\x72\x65\x64\151\163\x2f\x4d\x79\x52\x65\144\x69\x73\x2e\160\x68\160"; goto L7rbp; jM7jY: $key = "\x73\x65\156\x64\x5f\x74\x65\155\x70\154\141\x74\x65\174" . $GLOBALS["\x75\x6e\151\x61\x63\x69\x64"] . "\174" . $order_id . "\174" . $token; goto l_EAQ; L7rbp: $redis = new \MyRedis("\x31\x32\67\56\60\x2e\60\x2e\61", "\x36\63\x37\x39", '', "\61\x32"); goto vqfn0; vqfn0: load()->func("\154\157\x67\x67\x69\x6e\x67"); goto yxDiK; BlGJp: $redis->setex($key, $time, $value); goto Ok6lE; Ok6lE: } goto NF1EI; YzjL2: function msecTime() { goto BmH7g; BmH7g: list($usec, $sec) = explode("\40", microtime()); goto RB3e8; g4w4r: return $time; goto pPGxS; RB3e8: $time = (double) sprintf("\45\x2e\x30\146", (floatval($usec) + floatval($sec)) * 1000); goto g4w4r; pPGxS: }