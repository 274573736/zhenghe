<?php
 use Server\DesignateDriver; use Model\Config; use Server\app\Token; goto MInVl; nEPz7: sendUserTemplate($tpldata, $order["\x75\163\x65\x72\137\x69\x64"], $id, "\143\157\x6d\x70\154\145\x74\145\137\x74\145\155\x70\154\141\164\x65\x5f\151\144"); goto LkY58; X3jI2: $expect_timed = $expect_timed + $setting["\166\x61\x6c\x75\x65"] * 60; goto sLz0t; LkY58: return $this->result(0, "\xe6\210\220\345\x8a\x9f\xe9\x80\201\350\276\xbe\357\274\x81", array("\x6f\162\x64\x65\x72\137\151\144" => $id)); goto kyfsq; JDH9n: pdo_update("\x6d\x61\153\x65\x5f\x73\x70\x65\145\144\x5f\x6f\162\144\145\x72\x5f\x72\151\144\x65\x72", $upData, array("\157\x72\x64\x65\162\x5f\151\144" => $id)); goto X2XMv; kOPoW: Ugd71: goto u71Xs; Jooqn: hG9hd: goto HO4ZK; iRc0z: $expect_timed = get_mapapi_time($end["\x62\x65\147\x69\x6e\x5f\154\x6e\147"] . "\x2c" . $end["\142\145\147\x69\156\137\154\x61\164"], $end["\x65\156\144\137\154\x6e\147"] . "\54" . $end["\145\156\144\137\154\x61\x74"]); goto fRAPv; sf9iY: $trid = \Mclass\LieYing::addTrack($driver["\164\x69\x64"]); goto fwsI9; zcdVf: get_oneorder_coupon($order["\x75\x73\145\x72\137\x69\x64"]); goto myP8x; N7zTC: $rider = pdo_get("\155\x61\153\x65\137\x73\160\x65\x65\x64\137\162\151\x64\145\x72\137\151\156\146\157", array("\x72\x69\144\x65\162\x5f\x69\144" => $rider_id), array("\154\141\164", "\154\156\x67")); goto TnrDH; K08To: (new DesignateDriver())->deliveryOrder($longitude, $latitude, $id); goto Oygo3; GKINq: pdo_update("\x6d\x61\x6b\x65\137\x73\x70\145\x65\x64\x5f\x6f\x72\144\145\162\x5f\x70\151\x63\153\x63\x6f\x64\145", array("\145\x6e\x64\x5f\143\157\x64\x65" => $endcode), array("\x6f\x72\144\145\x72\x5f\151\144" => $id)); goto pRIom; maehU: $expect_timed = get_mapapi_time($rider["\x6c\156\147"] . "\54" . $rider["\154\141\164"], $end["\145\156\x64\x5f\x6c\x6e\147"] . "\x2c" . $end["\x65\156\144\137\x6c\141\164"]); goto OvvGl; fRJnH: $switch = pdo_getall("\x6d\x61\153\145\x5f\x73\160\145\x65\x64\137\163\145\164\164\x69\156\x67", array("\153\x65\171" => array("\147\145\164\143\157\144\145\137\x73\x77\x69\x74\x63\x68", "\x65\156\144\x63\157\x64\x65\137\163\x77\x69\x74\x63\x68", "\x65\x78\160\145\143\x74\x5f\x74\151\155\x65\144\60"), "\x75\156\x69\141\x63\x69\x64" => $GLOBALS["\x75\x6e\151\x61\x63\151\x64"]), array("\x6b\x65\x79", "\x76\x61\x6c\x75\145")); goto lpjm9; sLz0t: qPOkJ: goto smg0M; MInVl: global $_W, $_GPC; goto f1zdk; il57N: $switchImg = Config::getm(["\164\x61\x6b\x65\137\x70\150\x6f\164\x6f", "\162\145\143\145\x69\x76\x65\x5f\x70\150\x6f\x74\x6f"]); goto o78Fk; OvvGl: UkNK6: goto zb9pr; TM_rm: $longitude = $_GPC["\154\x6e\x67"]; goto IRJ7j; sVq67: if ($order["\164\x79\160\145"] == 5 && $order["\x70\141\x79\155\145\156\164"] == 3) { goto HshDa; } goto HI6mT; YHK3e: if (empty($setting["\x76\141\x6c\165\x65"])) { goto qPOkJ; } goto X3jI2; H8Sv0: if (!empty($img)) { goto Q4qls; } goto on52H; dD7VU: $img = !empty($_GPC["\x67\157\x6f\144\x73\x5f\x69\x6d\x67"]) ? trim($_GPC["\147\x6f\157\x64\163\137\151\155\147"]) : ''; goto lriyG; f1zdk: $rider_id = Token::getCurrentRid(); goto WcaJG; fwsI9: $upData["\x74\162\151\144"] = $trid; goto EWOcS; LyljD: send_aliyun_sms($end["\145\x6e\144\x5f\x70\150\157\156\145"], array("\x63\x6f\x64\145" => $endcode), "\x61\154\x69\x5f\x67\x6f\x74\157\137\x74\x65\155\160"); goto ez1u_; a0HLt: $end = pdo_get("\x6d\x61\153\145\x5f\x73\160\145\x65\144\x5f\x6f\162\144\145\x72\137\x61\x64\x64\x72\x65\163\x73", array("\157\162\144\145\162\x5f\x69\144" => $id), array("\x65\170\x74\145\156\163\151\157\156\x5f\x6e\165\x6d\142\x65\162", "\142\145\147\x69\156\137\x61\144\x64\162\x65\163\x73", "\145\x6e\x64\137\160\150\157\156\x65", "\142\145\x67\151\156\137\154\x61\164", "\142\x65\x67\x69\x6e\x5f\x6c\x6e\x67", "\145\156\144\137\154\x61\x74", "\x65\x6e\144\x5f\x6c\156\147")); goto AwQ1S; BBJ3h: return $this->result(0, "\xe5\217\x96\344\xbb\266\346\210\x90\345\x8a\x9f\357\274\x81", array("\157\162\x64\x65\x72\x5f\x69\x64" => $id)); goto euUVj; Ei8t6: return $this->result(0, "\350\xaf\267\350\276\x93\xe5\x85\xa5\xe6\255\243\347\xa1\256\347\232\x84\xe6\x94\xb6\xe4\xbb\xb6\xe7\240\x81\357\274\201"); goto Fuo92; TOUfB: if (!($order["\x74\171\x70\145"] == 3 && $order["\143\150\141\162\147\x5f\x74\171\x70\x65"] == 2)) { goto U1bEJ; } goto zAH3i; EGMzZ: return $this->result(0, "\xe8\xaf\xb7\350\276\x93\345\x85\245\346\xad\xa3\347\xa1\xae\xe7\x9a\x84\xe5\x8f\x96\344\xbb\266\xe7\xa0\x81\xef\xbc\x81"); goto kOPoW; AwQ1S: $expect_timed = 0; goto Ijwbq; IRJ7j: $pickcode = pdo_get("\155\141\x6b\145\137\163\160\145\145\x64\x5f\x6f\x72\x64\145\162\x5f\x70\x69\143\x6b\143\157\x64\x65", array("\157\x72\144\145\x72\x5f\x69\x64" => $id), array("\160\151\x63\x6b\137\143\x6f\x64\145", "\x65\156\x64\137\x63\x6f\x64\x65")); goto aX2YB; KoPJs: pdo_update("\155\x61\153\x65\x5f\x73\x70\x65\145\144\137\x6f\x72\x64\145\162\x5f\162\x69\x64\145\x72", array("\145\x6e\144\x5f\x69\x6d\147" => $endimg), array("\157\162\144\145\162\x5f\x69\144" => $id)); goto sVq67; Fuo92: ogiRS: goto sktc7; Ijwbq: if (empty($end["\x62\x65\x67\151\x6e\137\141\144\x64\x72\145\x73\x73"])) { goto nOxMb; } goto iRc0z; LcfI9: update_eleme_order($id, "\104\105\114\111\126\105\122\x59\137\123\x54\x41\x52\x54", $rider_id); goto N7zTC; Kn8Vp: if (empty($up)) { goto lvOwQ; } goto LcfI9; j8uG7: if (!pdo_update("\155\x61\153\x65\137\163\x70\145\145\144\137\x6f\x72\144\x65\x72", array("\x73\x74\x61\164\165\163" => 5), array("\151\x64" => $id))) { goto HaKtJ; } goto KoPJs; I7vYS: goto hG9hd; goto naxGr; Zy2AP: $endcode = generate_pick_code(1); goto h0TqW; vfDWp: $rider = pdo_get("\155\141\x6b\145\137\x73\160\x65\x65\x64\x5f\x72\x69\144\x65\162", array("\151\x64" => $rider_id), array("\x6e\151\143\153\x5f\156\x61\155\145", "\x6d\x6f\142\x69\154\x65")); goto Ggv5J; X2XMv: if (!(!in_array($order["\164\x79\x70\x65"], [3, 5]) && empty($end["\x65\170\x74\x65\156\x73\x69\157\x6e\137\156\x75\x6d\142\x65\x72"]))) { goto YUht0; } goto Zy2AP; fKLJG: goto tRCru; goto xv_jY; lriyG: $endimg = !empty($_GPC["\x65\156\144\137\x69\x6d\x67"]) ? trim($_GPC["\x65\156\x64\137\x69\155\147"]) : ''; goto Go0Dy; IDL1n: if (!($order["\164\x79\160\x65"] == 0)) { goto c3l5T; } goto hs9i7; LT2uA: HaKtJ: goto fKLJG; HI6mT: $result = riderGotoOrder($id, intval($rider_id)); goto I7vYS; pRIom: YUht0: goto BBJ3h; naxGr: HshDa: goto PD1Id; o78Fk: $take = isset($switchImg["\x74\x61\153\x65\x5f\160\x68\x6f\164\157"]) ? $switchImg["\164\x61\153\x65\x5f\160\x68\157\x74\x6f"] : 0; goto uEjNa; i9qqN: $upData = ["\x70\151\x63\x6b\137\151\x6d\147" => $img, "\147\x65\164\x5f\x74\151\x6d\145" => time(), "\147\x65\x74\137\155\x73\x65\143\x5f\x74\151\155\x65" => msecTime(), "\x65\170\160\x65\x63\164\x5f\x74\x69\155\x65\x64" => $expect_timed]; goto TOUfB; HO4ZK: update_eleme_order($id, "\x44\x45\x4c\111\x56\105\122\131\x5f\x43\117\x4d\120\114\x45\x54\x45"); goto zcdVf; h0TqW: if (!(!empty($endcode) && $order["\x74\171\160\145"] != 3 && $order["\164\171\160\145"] != 5)) { goto KfH0S; } goto LyljD; hs9i7: if (!(!empty($pickcode["\160\x69\x63\x6b\x5f\143\157\144\145"]) && $pickcode["\x70\x69\143\x6b\x5f\143\157\144\145"] != $code && empty($switch["\147\x65\164\x63\x6f\x64\x65\137\x73\x77\x69\x74\x63\150"]))) { goto Ugd71; } goto EGMzZ; sktc7: if ($order["\x74\171\x70\145"] == 3 && $order["\x63\x68\x61\162\147\137\164\171\x70\x65"] == 2) { goto kdHYy; } goto j8uG7; myP8x: rider_invite_user($order["\165\x73\x65\162\137\151\x64"]); goto LjLCq; fRAPv: goto UkNK6; goto zjf6I; HBnqm: $up = pdo_update("\x6d\141\153\145\137\x73\160\145\145\x64\x5f\x6f\x72\144\145\x72", array("\163\164\x61\164\165\x73" => 4), array("\151\x64" => $id)); goto Kn8Vp; uEjNa: $receive = isset($switchImg["\x72\x65\x63\x65\x69\166\145\x5f\x70\150\157\x74\x6f"]) ? $switchImg["\162\x65\143\145\x69\166\145\137\160\150\x6f\x74\x6f"] : 0; goto Dz78H; WcaJG: $id = !empty($_GPC["\151\144"]) ? (int) $_GPC["\x69\x64"] : 0; goto xko5V; on52H: if (!(!empty($pickcode["\x65\x6e\x64\137\143\157\x64\x65"]) && $pickcode["\x65\x6e\144\137\143\157\144\x65"] != $code && empty($switch["\145\x6e\x64\143\157\x64\145\137\x73\x77\x69\x74\x63\150"]) && $order["\164\x79\x70\145"] != 3)) { goto ogiRS; } goto Ei8t6; xv_jY: kdHYy: goto K08To; zAH3i: try { $redis = new Redis(); $redis->connect("\61\x32\x37\x2e\60\x2e\60\56\x31", "\66\63\x37\71"); } catch (Exception $e) { return $this->result(0, $e->getMessage()); } goto du1Dt; kyfsq: Q4qls: goto djikP; TnrDH: update_eleme_location($id, $rider["\x6c\x61\164"], $rider["\x6c\x6e\147"]); goto a0HLt; Oygo3: tRCru: goto S_dwB; aX2YB: $order = pdo_get("\x6d\x61\x6b\145\137\163\x70\145\x65\144\137\x6f\162\x64\145\162", array("\151\144" => $id), array("\x6f\162\144\145\162\137\x63\157\144\145", "\x75\x73\145\162\137\151\x64", "\160\141\171\x6d\145\x6e\164", "\x67\x6f\x6f\144\163\156\x61\x6d\x65", "\164\x79\160\x65", "\163\164\141\x74\165\163", "\x67\x65\164\137\164\151\155\x65", "\143\150\141\x72\x67\x5f\164\171\160\x65")); goto fRJnH; du1Dt: $driver = pdo_get("\x6d\x61\x6b\145\137\163\x70\145\x65\x64\x5f\x72\x69\144\145\162\x5f\x64\x72\151\166\x65\x72", ["\x72\151\x64\x65\x72\137\x69\144" => $rider_id], ["\164\151\x64"]); goto sf9iY; smg0M: $expect_timed = $expect_timed !== '' ? date("\x48\72\x69", time() + $expect_timed) : ''; goto i9qqN; Dz78H: if (empty($img)) { goto Pppi6; } goto IDL1n; euUVj: lvOwQ: goto Cea7V; lGRjB: $tpldata = array("\153\145\x79\167\157\162\144\x31" => array("\x76\141\x6c\165\x65" => $order["\157\162\144\145\x72\x5f\x63\157\x64\145"]), "\153\145\171\167\157\x72\144\x32" => array("\166\141\x6c\x75\x65" => "\x5b" . $ordertype[$order["\164\x79\x70\145"]] . "\x5d\40" . $order["\147\157\157\144\x73\156\x61\x6d\x65"]), "\153\145\x79\167\157\162\144\63" => array("\166\141\x6c\x75\145" => date("\131\x2d\155\x2d\x64\x20\110\72\151")), "\153\x65\171\167\x6f\x72\x64\x34" => array("\x76\141\x6c\165\x65" => $rider["\156\151\143\153\137\x6e\x61\155\x65"]), "\153\145\x79\167\157\162\144\65" => array("\x76\141\x6c\x75\x65" => !empty($phone["\166\x61\x6c\x75\145"]) ? $phone["\x76\141\x6c\x75\145"] : "\346\234\xaa\350\xae\276\347\275\256"), "\x6b\145\171\x77\157\x72\x64\66" => array("\x76\141\154\x75\145" => "\346\202\250\xe7\232\x84\xe8\xae\xa2\xe5\215\225" . $type . "\345\xb7\xb2\345\256\x8c\xe6\x88\x90\357\xbc\x81\xe5\246\x82\xe6\x9c\211\xe7\x96\221\xe9\227\256\350\xaf\267\xe6\x8b\xa8\346\211\x93\xe8\201\x94\xe7\263\xbb\345\xae\xa2\xe6\234\215\xe7\x94\xb5\350\xaf\x9d")); goto nEPz7; LjLCq: rider_complete_order($rider_id); goto o91W9; PD1Id: freightCompleteOrder($id, intval($rider_id)); goto Jooqn; o91W9: rider_usercomplete_order($order["\x75\x73\x65\x72\137\151\x64"]); goto LT2uA; Spwop: $ordertype = array("\345\270\256\351\x80\x81", "\345\270\256\xe4\xb9\xb0", "\344\270\x87\xe8\x83\275\346\234\x8d\xe5\x8a\xa1", "\xe4\xbb\243\xe9\xa9\xbe"); goto lGRjB; lpjm9: $switch = !empty($switch) ? @array_column($switch, "\166\x61\x6c\x75\x65", "\x6b\x65\171") : array(); goto il57N; ez1u_: KfH0S: goto GKINq; u71Xs: c3l5T: goto HBnqm; zb9pr: $setting = pdo_get("\155\141\x6b\145\x5f\x73\160\145\145\x64\x5f\163\x65\164\164\x69\156\147", array("\153\x65\171" => "\145\x78\x70\x65\143\x74\137\x74\151\155\145\x64" . $order["\x74\x79\x70\x65"], "\165\x6e\x69\141\x63\x69\x64" => $GLOBALS["\165\156\151\141\x63\151\144"]), array("\166\141\154\165\145")); goto YHK3e; Ggv5J: $phone = pdo_get("\x6d\x61\x6b\x65\x5f\x73\160\145\x65\144\x5f\x73\145\x74\164\151\x6e\147", array("\153\145\171" => "\153\145\x66\x75\137\160\x68\157\156\145", "\165\x6e\151\x61\x63\x69\x64" => $GLOBALS["\165\156\x69\x61\x63\x69\x64"]), array("\166\141\154\165\x65")); goto Spwop; Cea7V: Pppi6: goto H8Sv0; zUyaL: U1bEJ: goto JDH9n; zjf6I: nOxMb: goto maehU; S_dwB: $type = $order["\x74\x79\160\145"] == 3 || $order["\x74\171\x70\x65"] == 5 ? "\xe5\217\270\xe6\234\272" : "\351\252\221\xe6\211\213"; goto vfDWp; xko5V: $code = !empty($_GPC["\x67\157\x6f\x64\163\x5f\143\x6f\x64\x65"]) ? trim($_GPC["\147\x6f\157\x64\x73\137\x63\157\144\x65"]) : ''; goto dD7VU; Go0Dy: $latitude = $_GPC["\154\141\x74"]; goto TM_rm; EWOcS: $redis->set("\x64\162\x69\166\x65\x72" . $rider_id, $id); goto zUyaL; djikP: return $this->result(0, "\350\256\242\345\215\225\xe6\233\xb4\xe6\x96\260\xe5\244\xb1\350\xb4\xa5\357\274\x81");